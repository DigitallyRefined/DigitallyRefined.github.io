"use strict";(self.webpackChunkdigitally_refined=self.webpackChunkdigitally_refined||[]).push([[687],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var i=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=i.createContext({}),c=function(e){var n=i.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=c(e.components);return i.createElement(l.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},p=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(t),p=a,f=u["".concat(l,".").concat(p)]||u[p]||m[p]||o;return t?i.createElement(f,r(r({ref:n},d),{},{components:t})):i.createElement(f,r({ref:n},d))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=p;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[u]="string"==typeof e?e:a,r[1]=s;for(var c=2;c<o;c++)r[c]=t[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3901:(e,n,t)=>{t.d(n,{Z:()=>r});var i=t(7294),a=t(3743);const o={tableOfContentsInline:"tableOfContentsInline_prmo"};function r(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:r}=e;return i.createElement("div",{className:o.tableOfContentsInline},i.createElement(a.Z,{toc:n,minHeadingLevel:t,maxHeadingLevel:r,className:"table-of-contents",linkClassName:null}))}},3743:(e,n,t)=>{t.d(n,{Z:()=>f});var i=t(7462),a=t(7294),o=t(6668);function r(e){const n=e.map((e=>({...e,parentIndex:-1,children:[]}))),t=Array(7).fill(-1);n.forEach(((e,n)=>{const i=t.slice(2,e.level);e.parentIndex=Math.max(...i),t[e.level]=n}));const i=[];return n.forEach((e=>{const{parentIndex:t,...a}=e;t>=0?n[t].children.push(a):i.push(a)})),i}function s(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return n.flatMap((e=>{const n=s({toc:e.children,minHeadingLevel:t,maxHeadingLevel:i});return function(e){return e.level>=t&&e.level<=i}(e)?[{...e,children:n}]:n}))}function l(e){const n=e.getBoundingClientRect();return n.top===n.bottom?l(e.parentNode):n}function c(e,n){let{anchorTopOffset:t}=n;const i=e.find((e=>l(e).top>=t));if(i){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(l(i))?i:e[e.indexOf(i)-1]??null}return e[e.length-1]??null}function d(){const e=(0,a.useRef)(0),{navbar:{hideOnScroll:n}}=(0,o.L)();return(0,a.useEffect)((()=>{e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function u(e){const n=(0,a.useRef)(void 0),t=d();(0,a.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:a,minHeadingLevel:o,maxHeadingLevel:r}=e;function s(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),s=function(e){let{minHeadingLevel:n,maxHeadingLevel:t}=e;const i=[];for(let a=n;a<=t;a+=1)i.push(`h${a}.anchor`);return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:o,maxHeadingLevel:r}),l=c(s,{anchorTopOffset:t.current}),d=e.find((e=>l&&l.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(a),e.classList.add(a),n.current=e):e.classList.remove(a)}(e,e===d)}))}return document.addEventListener("scroll",s),document.addEventListener("resize",s),s(),()=>{document.removeEventListener("scroll",s),document.removeEventListener("resize",s)}}),[e,t])}function m(e){let{toc:n,className:t,linkClassName:i,isChild:o}=e;return n.length?a.createElement("ul",{className:o?void 0:t},n.map((e=>a.createElement("li",{key:e.id},a.createElement("a",{href:`#${e.id}`,className:i??void 0,dangerouslySetInnerHTML:{__html:e.value}}),a.createElement(m,{isChild:!0,toc:e.children,className:t,linkClassName:i}))))):null}const p=a.memo(m);function f(e){let{toc:n,className:t="table-of-contents table-of-contents__left-border",linkClassName:l="table-of-contents__link",linkActiveClassName:c,minHeadingLevel:d,maxHeadingLevel:m,...f}=e;const h=(0,o.L)(),g=d??h.tableOfContents.minHeadingLevel,y=m??h.tableOfContents.maxHeadingLevel,v=function(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return(0,a.useMemo)((()=>s({toc:r(n),minHeadingLevel:t,maxHeadingLevel:i})),[n,t,i])}({toc:n,minHeadingLevel:g,maxHeadingLevel:y});return u((0,a.useMemo)((()=>{if(l&&c)return{linkClassName:l,linkActiveClassName:c,minHeadingLevel:g,maxHeadingLevel:y}}),[l,c,g,y])),a.createElement(p,(0,i.Z)({toc:v,className:t,linkClassName:l},f))}},4612:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=t(7462),a=(t(7294),t(3905)),o=t(3901);const r={sidebar_position:3},s="Everything Presence Lite sensor",l={unversionedId:"guides/Everything-Presence-Lite-sensor",id:"guides/Everything-Presence-Lite-sensor",title:"Everything Presence Lite sensor",description:"The Everything Presence Lite sensor was release in October 2023 for \xa328 or around $30 (plus postage) from Everything Smart Technology.",source:"@site/docs/guides/Everything-Presence-Lite-sensor.md",sourceDirName:"guides",slug:"/guides/Everything-Presence-Lite-sensor",permalink:"/guides/Everything-Presence-Lite-sensor",draft:!1,editUrl:"https://github.com/DigitallyRefined/DigitallyRefined.github.io/tree/main/docs/guides/Everything-Presence-Lite-sensor.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"",permalink:"/"},next:{title:"Tailscale & Headscale",permalink:"/guides/Tailscale-Headscale-setup"}},c={},d=[{value:"Video",id:"video",level:2},{value:"Features",id:"features",level:2},{value:"Pros",id:"pros",level:2},{value:"Cons",id:"cons",level:2},{value:"Home Assistant automations",id:"home-assistant-automations",level:2},{value:"On - Lights on when dark &amp; presence detected",id:"on---lights-on-when-dark--presence-detected",level:3},{value:"Off - Lights (no occupancy)",id:"off---lights-no-occupancy",level:3},{value:"Home Assistant scripts",id:"home-assistant-scripts",level:2},{value:"Off - Slowly turn off lights (no occupancy)",id:"off---slowly-turn-off-lights-no-occupancy",level:3}],u={toc:d},m="wrapper";function p(e){let{components:n,...t}=e;return(0,a.kt)(m,(0,i.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"everything-presence-lite-sensor"},"Everything Presence Lite sensor"),(0,a.kt)("p",null,"The ",(0,a.kt)("a",{parentName:"p",href:"https://shop.everythingsmart.io/products/everything-presence-lite"},"Everything Presence Lite")," sensor was release in October 2023 for \xa328 or around $30 (plus postage) from ",(0,a.kt)("a",{parentName:"p",href:"https://shop.everythingsmart.io"},"Everything Smart Technology"),"."),(0,a.kt)(o.Z,{toc:d,mdxType:"TOCInline"}),(0,a.kt)("h2",{id:"video"},"Video"),(0,a.kt)("div",{className:"remark-oembed-inline remark-oembed-you-tube","data-oembed":""},(0,a.kt)("a",{parentName:"div",href:"https://youtu.be/HABmLjZ2mWQ",className:"remark-oembed-anchor","data-oembed":"",rel:"noopener noreferrer nofollow",target:"_blank"},(0,a.kt)("img",{parentName:"a",src:"https://i.ytimg.com/vi/HABmLjZ2mWQ/hqdefault.jpg",title:"Everything Presence Lite sensor - Quick look, unboxing and setup",width:200,height:113,className:"remark-oembed-photo","data-oembed":""})),(0,a.kt)("template",{parentName:"div","data-oembed-template":""})),(0,a.kt)("a",{href:"https://youtu.be/HABmLjZ2mWQ"},"Watch on YouTube"),(0,a.kt)("h2",{id:"features"},"Features"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Precise mmWave radar motion detector"),(0,a.kt)("li",{parentName:"ul"},"Light luminosity (or room brightness) sensor"),(0,a.kt)("li",{parentName:"ul"},"WiFi"),(0,a.kt)("li",{parentName:"ul"},"Bluetooth repeater/Home Assistant proxy"),(0,a.kt)("li",{parentName:"ul"},"ESP32 (can be extended using GPIO pins)"),(0,a.kt)("li",{parentName:"ul"},"3D printed case"),(0,a.kt)("li",{parentName:"ul"},"USB-C")),(0,a.kt)("h2",{id:"pros"},"Pros"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Relatively inexpensive way to add presence, motion and room brightness data to your smart home"),(0,a.kt)("li",{parentName:"ul"},"Much more sensitive than a regular PIR motion sensor and can easily detect people that are sitting still"),(0,a.kt)("li",{parentName:"ul"},"Can perform automatons based on sensor data, such as turning on/off lights"),(0,a.kt)("li",{parentName:"ul"},"Beta zones feature can perform different actions/automations based on where the motion/presence was detected"),(0,a.kt)("li",{parentName:"ul"},"Can see through thin walls"),(0,a.kt)("li",{parentName:"ul"},"Can extend your Home Assistant Bluetooth range via proxy"),(0,a.kt)("li",{parentName:"ul"},"Good quality braided cable"),(0,a.kt)("li",{parentName:"ul"},"Works with Home Assistant via WiFi"),(0,a.kt)("li",{parentName:"ul"},"USB-C powered")),(0,a.kt)("h2",{id:"cons"},"Cons"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Not always in stock since they're a relative small startup business"),(0,a.kt)("li",{parentName:"ul"},"Setting up different zones can be tricky, as it's a beta feature requiring trial and error defining coordinates in 3D space by using start and end X/Y millimetre values"),(0,a.kt)("li",{parentName:"ul"},"It's capable of detecting small movements such as breathing, however I was able to sit still long enough for it to give me a false positive and detect me as away (though sensitivity can be calibrated, to fix this)"),(0,a.kt)("li",{parentName:"ul"},"Only available in white")),(0,a.kt)("h2",{id:"home-assistant-automations"},"Home Assistant automations"),(0,a.kt)("p",null,"Note: you'll need to paste this in YAML mode then switch back to the visual editor you should then be able to update the device/light IDs."),(0,a.kt)("h3",{id:"on---lights-on-when-dark--presence-detected"},"On - Lights on when dark & presence detected"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yml"},'alias: On - Lights on when dark & presence detected\ndescription: ""\ntrigger:\n  - platform: sun\n    event: sunset\n    offset: "-00:30:00"\n  - type: illuminance\n    platform: device\n    entity_id: sensor.epl_presence_illuminance\n    domain: sensor\n    for:\n      hours: 0\n      minutes: 0\n      seconds: 20\n    below: 2.7\n  - platform: state\n    entity_id:\n      - binary_sensor.epl_presence_occupancy\n    to: "on"\n  - platform: state\n    entity_id:\n      - person.DigitallyRefined\n    from: not_home\n    to: home\ncondition:\n  - condition: time\n    before: "21:55:00"\n  - condition: device\n    type: is_off\n    device_id: <pick your light>\n    domain: light\n  - condition: or\n    conditions:\n      - type: is_illuminance\n        condition: device\n        entity_id: sensor.epl_presence_illuminance\n        domain: sensor\n        below: 2.7\n      - condition: sun\n        after: sunset\n        after_offset: "-00:30:00"\n  - condition: numeric_state\n    entity_id: zone.home\n    above: 0\n  - condition: state\n    entity_id: binary_sensor.epl_presence_occupancy\n    state: "on"\n  # Optional condition based on a Zigbee button press to prevent lights from automatically turning on again\n  # (within 1 hour when they have been manually be turned off)\n  - condition: template\n    value_template: >-\n      {{ ((as_timestamp(now()) -\n      as_timestamp(states.scene.lights_off_manually_triggered.state)) > 3600) or\n      (as_timestamp(states.scene.lights_on.state) >\n      as_timestamp(states.scene.lights_off_manually_triggered.state)) }}\naction:\n  - service: scene.turn_on\n    target:\n      entity_id: scene.lights_on\n    metadata: {}\nmode: single\n')),(0,a.kt)("h3",{id:"off---lights-no-occupancy"},"Off - Lights (no occupancy)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'alias: Off - Lights (no occupancy)\ndescription: ""\ntrigger:\n  - platform: state\n    entity_id:\n      - binary_sensor.epl_presence_occupancy\n    from: "on"\n    to: "off"\ncondition:\n  - condition: device\n    type: is_on\n    device_id: <pick your light>\n    domain: switch\n  # Optional condition to check if a Smart TV is not current being used\n  - condition: not\n    conditions:\n      - condition: device\n        domain: media_player\n        entity_id: <pick your Android TV or streaming device>\n        type: is_playing\naction:\n  - service: script.slowly_turn_off_lights_no_occupancy\n    data: {}\nmode: single\n')),(0,a.kt)("h2",{id:"home-assistant-scripts"},"Home Assistant scripts"),(0,a.kt)("h3",{id:"off---slowly-turn-off-lights-no-occupancy"},"Off - Slowly turn off lights (no occupancy)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},'alias: Off - Slowly turn off lights (no occupancy)\nsequence:\n  - if:\n      - condition: state\n        entity_id: binary_sensor.epl_presence_occupancy\n        state: "off"\n    then:\n      - type: turn_off\n        entity_id: <choose first light>\n        domain: light\n      - delay:\n          hours: 0\n          minutes: 0\n          seconds: 10\n          milliseconds: 0\n      - if:\n          - condition: state\n            entity_id: binary_sensor.epl_presence_occupancy\n            state: "off"\n        then:\n          - type: turn_off\n            entity_id: <choose second light>\n            domain: light\n          - delay:\n              hours: 0\n              minutes: 0\n              seconds: 10\n              milliseconds: 0\n          - if:\n              - condition: state\n                entity_id: binary_sensor.epl_presence_occupancy\n                state: "off"\n            then:\n              - type: turn_off\n                entity_id: <choose third light etc...>\n                domain: switch\nmode: single\nicon: mdi:lightbulb-multiple-off-outline\n')),(0,a.kt)("script",{async:!0,defer:!0},"\n    const isDocumentReady = () => {\n      if (document.readyState !== 'complete') {\n        document.addEventListener('readystatechange', isDocumentReady);\n        return false;\n      }\n\n      requestAnimationFrame(() => {\n        \n    document.querySelectorAll('div[data-oembed]').forEach((el) => {\n      const template = el.querySelector('[data-oembed-template]').content.cloneNode(true);\n      el.innerHTML = '';\n      el.attachShadow({ mode: 'closed' }).appendChild(template);\n    });\n\n    document.querySelectorAll('img[data-oembed][data-src]').forEach((img) => {\n      img.setAttribute('src', img.getAttribute('data-src'));\n      img.removeAttribute('data-src');\n    });\n\n    document.querySelectorAll('[data-oembed]').forEach((el) => {\n      el.removeAttribute('data-oembed');\n    });\n  ;\n      });\n\n      return true;\n    };\n\n    if (!isDocumentReady()) {\n      document.addEventListener('readystatechange', isDocumentReady);\n    }\n  "))}p.isMDXComponent=!0}}]);