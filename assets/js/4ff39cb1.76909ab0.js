/*! For license information please see 4ff39cb1.76909ab0.js.LICENSE.txt */
"use strict";(self.webpackChunkdigitally_refined=self.webpackChunkdigitally_refined||[]).push([[116],{7675:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>h});var i=t(5893),a=t(1151),s=t(3901),r=t(4208);const l={sidebar_position:1,slug:"/guides/IKEA-VINDSTYRKA",last_update:{date:new Date("2023-05-15T00:00:00.000Z")}},o="IKEA VINDSTYRKA",c={id:"guides/2023-05-14-IKEA-VINDSTYRKA",title:"IKEA VINDSTYRKA",description:"The IKEA VINDSTYRKA an relatively inexpensive air quality monitor $49/\xa335 that was released in April 2023.",source:"@site/docs/guides/2023-05-14-IKEA-VINDSTYRKA.mdx",sourceDirName:"guides",slug:"/guides/IKEA-VINDSTYRKA",permalink:"/guides/IKEA-VINDSTYRKA",draft:!1,unlisted:!1,editUrl:"https://github.com/DigitallyRefined/DigitallyRefined.github.io/tree/main/docs/guides/2023-05-14-IKEA-VINDSTYRKA.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/guides/IKEA-VINDSTYRKA",last_update:{date:"2023-05-15T00:00:00.000Z"}},sidebar:"tutorialSidebar",previous:{title:"Tailscale & Headscale",permalink:"/guides/Tailscale-Headscale-setup"}},d={},h=[{value:"Video",id:"video",level:2},{value:"Features",id:"features",level:2},{value:"Pros",id:"pros",level:2},{value:"Cons",id:"cons",level:2},{value:"Home Assistant ZHA integration",id:"home-assistant-zha-integration",level:2},{value:"Applying the patch manually",id:"applying-the-patch-manually",level:3},{value:"Uninstalling the patch",id:"uninstalling-the-patch",level:3}];function u(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"ikea-vindstyrka",children:"IKEA VINDSTYRKA"}),"\n",(0,i.jsx)(n.p,{children:"The IKEA VINDSTYRKA an relatively inexpensive air quality monitor $49/\xa335 that was released in April 2023."}),"\n","\n",(0,i.jsx)(s.Z,{toc:h}),"\n",(0,i.jsx)(n.h2,{id:"video",children:"Video"}),"\n","\n",(0,i.jsx)(r.Z,{id:"EvjTHlPT9zM",title:"IKEA VINDSTYRKA Review & Pairing to Home Assistant",poster:"maxresdefault",webp:!0}),"\n",(0,i.jsx)("a",{href:"https://youtu.be/EvjTHlPT9zM",children:"Watch on YouTube"}),"\n",(0,i.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"PM2.5"}),"\n",(0,i.jsx)(n.li,{children:"tVOC"}),"\n",(0,i.jsx)(n.li,{children:"Temperature"}),"\n",(0,i.jsx)(n.li,{children:"Humidity"}),"\n",(0,i.jsx)(n.li,{children:"Air quality icons"}),"\n",(0,i.jsx)(n.li,{children:"Zigbee radio"}),"\n",(0,i.jsx)(n.li,{children:"USB-C"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"pros",children:"Pros"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Relatively inexpensive way to add air quality, temperature & humidity data to your smart home"}),"\n",(0,i.jsx)(n.li,{children:"Can perform automatons based on data, such as turning on/off air purifiers, air conditioning and dehumidifiers or even humidifiers"}),"\n",(0,i.jsx)(n.li,{children:"Configurable backlight brightness & always on or auto off"}),"\n",(0,i.jsx)(n.li,{children:"Works with Home Assistant via Zigbee"}),"\n",(0,i.jsx)(n.li,{children:"USB-C powered"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cons",children:"Cons"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No time or date on display (LCD limitation)"}),"\n",(0,i.jsx)(n.li,{children:"Fan does make small amount of noise"}),"\n",(0,i.jsx)(n.li,{children:"Temperature lacks decimal places (precision)"}),"\n",(0,i.jsx)(n.li,{children:"Getting the tVOC value via ZHA requires a bit more setup"}),"\n",(0,i.jsx)(n.li,{children:"Only available in white"}),"\n",(0,i.jsx)(n.li,{children:"No battery"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"home-assistant-zha-integration",children:"Home Assistant ZHA integration"}),"\n",(0,i.jsxs)(n.p,{children:["Currently if you're using the default ",(0,i.jsx)(n.a,{href:"https://www.home-assistant.io/integrations/zha/",children:"ZHA integration"})," for your Zigbee coordinator, the tVOC sensor wont be available in Home Assistant. However, tVOC is available via the ",(0,i.jsx)(n.a,{href:"https://github.com/zigbee2mqtt/hassio-zigbee2mqtt#installation",children:"Zigbee2MQTT plug-in"})," (so if you're using Zigbee2MQTT there's no need to apply the patch below)."]}),"\n",(0,i.jsxs)(n.p,{children:["See also: ",(0,i.jsx)(n.a,{href:"https://youtu.be/RWzzNe5gm5s",children:"differences between ZHA and Zigbee2MQTT"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"There are currently 2 GitHub pull requests to enable it, however at the time of publishing they weren't merged:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/zigpy/zha-device-handlers/pull/2315",children:"Add support for IKEA VINDSTYRKA Air quality Sensor #2315"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/home-assistant/core/pull/90616",children:'Add support for "VOC Index" sensor entity in ZHA #90616'})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"applying-the-patch-manually",children:"Applying the patch manually"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"config/configuration.yaml"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"zha:\n custom_quirks_path: /share/zhaquirks/\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"share/ikea-vindstyrka/patch-zha-sensor.sh"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'#!/usr/bin/env bash\n\nSCRIPT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )\nCONFIG_DIR=$(realpath $SCRIPT_DIR/../../config)\nZHA_DIR=$CONFIG_DIR/custom_components/zha\nZHAQUIRKS_DIR=$(realpath $SCRIPT_DIR/../zhaquirks)\n\nmkdir -p $CONFIG_DIR/custom_components\n\nrm -fR $ZHA_DIR\ndocker cp homeassistant:/usr/src/homeassistant/homeassistant/components/zha $ZHA_DIR\ndocker cp homeassistant:/usr/local/lib/python3.10/site-packages/zhaquirks $ZHAQUIRKS_DIR\n\napk add patch\n\npatch -u -b $ZHA_DIR/sensor.py -i $SCRIPT_DIR/sensor.patch\npatch -u -b $ZHA_DIR/manifest.json -i $SCRIPT_DIR/version.patch\nwget https://raw.githubusercontent.com/zigpy/zha-device-handlers/8e568464caedab3bd7c7fedb2544da99987d05d0/zhaquirks/ikea/vindstyrka.py -P $ZHAQUIRKS_DIR/ikea\n\ndocker restart homeassistant\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"chmod +x share/ikea-vindstyrka/patch-zha-sensor.sh"})}),"\n",(0,i.jsxs)(n.p,{children:["Patches are based off the ",(0,i.jsx)(n.a,{href:"https://github.com/home-assistant/core/pull/90616.patch",children:'"VOC Index" pull request'})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"share/ikea-vindstyrka/sensor.patch"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'--- sensor.py.orig\t2023-05-04 09:39:47.277383955 +0100\n+++ sensor.py\t2023-05-04 09:48:06.726541317 +0100\n@@ -700,6 +700,18 @@\n     _attr_native_unit_of_measurement = CONCENTRATION_PARTS_PER_BILLION\n \n \n+@MULTI_MATCH(cluster_handler_names="voc_index", stop_on_match_group="voc_index")\n+class VOCIndex(Sensor):\n+    """VOC Index sensor."""\n+\n+    SENSOR_ATTR = "measured_value"\n+    _attr_device_class: SensorDeviceClass = SensorDeviceClass.VOLATILE_ORGANIC_COMPOUNDS\n+    _attr_state_class: SensorStateClass = SensorStateClass.MEASUREMENT\n+    _attr_name: str = "VOC index"\n+    _decimals = 0\n+    _multiplier = 1\n+\n+\n @MULTI_MATCH(cluster_handler_names="pm25")\n class PM25(Sensor):\n     """Particulate Matter 2.5 microns or less sensor."""\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"share/ikea-vindstyrka/version.patch"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'--- manifest.json\t2023-04-09 04:43:34.000000000 +0100\n+++ "manifest copy.json"\t2023-04-09 08:55:44.655664588 +0100\n@@ -1,6 +1,7 @@\n {\n   "domain": "zha",\n   "name": "Zigbee Home Automation",\n+  "version": "0.0.1-ikea-vindstyrka",\n   "after_dependencies": ["onboarding", "usb"],\n   "codeowners": ["@dmulcahey", "@adminiuga", "@puddly"],\n   "config_flow": true,\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Once the files have been copied over to your Home Assistant, run the patch script via:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"~/share/ikea-vindstyrka/patch-zha-sensor.sh"})]}),"\n",(0,i.jsx)(n.p,{children:"Note: each time Home Assistant updates you will need to rerun the script."}),"\n",(0,i.jsx)(n.h3,{id:"uninstalling-the-patch",children:"Uninstalling the patch"}),"\n",(0,i.jsxs)(n.p,{children:["Delete the ",(0,i.jsx)(n.code,{children:"zha.custom_quirks_path"})," in your configuration and remove following directories:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"config/custom_components/zha"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"share/ikea-vindstyrka"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"share/zhaquirks"})}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},3901:(e,n,t)=>{t.d(n,{Z:()=>r});t(7294);var i=t(3743);const a={tableOfContentsInline:"tableOfContentsInline_prmo"};var s=t(5893);function r(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:r}=e;return(0,s.jsx)("div",{className:a.tableOfContentsInline,children:(0,s.jsx)(i.Z,{toc:n,minHeadingLevel:t,maxHeadingLevel:r,className:"table-of-contents",linkClassName:null})})}},3743:(e,n,t)=>{t.d(n,{Z:()=>f});var i=t(7294),a=t(6668);function s(e){const n=e.map((e=>({...e,parentIndex:-1,children:[]}))),t=Array(7).fill(-1);n.forEach(((e,n)=>{const i=t.slice(2,e.level);e.parentIndex=Math.max(...i),t[e.level]=n}));const i=[];return n.forEach((e=>{const{parentIndex:t,...a}=e;t>=0?n[t].children.push(a):i.push(a)})),i}function r(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return n.flatMap((e=>{const n=r({toc:e.children,minHeadingLevel:t,maxHeadingLevel:i});return function(e){return e.level>=t&&e.level<=i}(e)?[{...e,children:n}]:n}))}function l(e){const n=e.getBoundingClientRect();return n.top===n.bottom?l(e.parentNode):n}function o(e,n){let{anchorTopOffset:t}=n;const i=e.find((e=>l(e).top>=t));if(i){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(l(i))?i:e[e.indexOf(i)-1]??null}return e[e.length-1]??null}function c(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:n}}=(0,a.L)();return(0,i.useEffect)((()=>{e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function d(e){const n=(0,i.useRef)(void 0),t=c();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:a,minHeadingLevel:s,maxHeadingLevel:r}=e;function l(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),l=function(e){let{minHeadingLevel:n,maxHeadingLevel:t}=e;const i=[];for(let a=n;a<=t;a+=1)i.push(`h${a}.anchor`);return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:s,maxHeadingLevel:r}),c=o(l,{anchorTopOffset:t.current}),d=e.find((e=>c&&c.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(a),e.classList.add(a),n.current=e):e.classList.remove(a)}(e,e===d)}))}return document.addEventListener("scroll",l),document.addEventListener("resize",l),l(),()=>{document.removeEventListener("scroll",l),document.removeEventListener("resize",l)}}),[e,t])}var h=t(3692),u=t(5893);function m(e){let{toc:n,className:t,linkClassName:i,isChild:a}=e;return n.length?(0,u.jsx)("ul",{className:a?void 0:t,children:n.map((e=>(0,u.jsxs)("li",{children:[(0,u.jsx)(h.Z,{to:`#${e.id}`,className:i??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,u.jsx)(m,{isChild:!0,toc:e.children,className:t,linkClassName:i})]},e.id)))}):null}const p=i.memo(m);function f(e){let{toc:n,className:t="table-of-contents table-of-contents__left-border",linkClassName:l="table-of-contents__link",linkActiveClassName:o,minHeadingLevel:c,maxHeadingLevel:h,...m}=e;const f=(0,a.L)(),g=c??f.tableOfContents.minHeadingLevel,v=h??f.tableOfContents.maxHeadingLevel,x=function(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:a}=e;return(0,i.useMemo)((()=>r({toc:s(n),minHeadingLevel:t,maxHeadingLevel:a})),[n,t,a])}({toc:n,minHeadingLevel:g,maxHeadingLevel:v});return d((0,i.useMemo)((()=>{if(l&&o)return{linkClassName:l,linkActiveClassName:o,minHeadingLevel:g,maxHeadingLevel:v}}),[l,o,g,v])),(0,u.jsx)(p,{toc:x,className:t,linkClassName:l,...m})}},4208:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(7294),a=function(){return a=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},a.apply(this,arguments)};var s=i.forwardRef((function(e,n){var t=i.useState(!1),s=t[0],r=t[1],l=i.useState(!1),o=l[0],c=l[1],d=encodeURIComponent(e.id),h="string"==typeof e.playlistCoverId?encodeURIComponent(e.playlistCoverId):null,u=e.title,m=e.poster||"hqdefault",p="&".concat(e.params)||0,f=e.muted?"&mute=1":"",g=e.announce||"Watch",v=e.webp?"webp":"jpg",x=e.webp?"vi_webp":"vi",j=e.thumbnail||(e.playlist?"https://i.ytimg.com/".concat(x,"/").concat(h,"/").concat(m,".").concat(v):"https://i.ytimg.com/".concat(x,"/").concat(d,"/").concat(m,".").concat(v)),y=e.noCookie;y=e.cookie?"https://www.youtube.com":"https://www.youtube-nocookie.com";var b=e.playlist?"".concat(y,"/embed/videoseries?autoplay=1").concat(f,"&list=").concat(d).concat(p):"".concat(y,"/embed/").concat(d,"?autoplay=1&state=1").concat(f).concat(p),I=e.activatedClass||"lyt-activated",A=e.adNetwork||!1,_=e.aspectHeight||9,C=e.aspectWidth||16,k=e.iframeClass||"",H=e.playerClass||"lty-playbtn",R=e.wrapperClass||"yt-lite",N=e.onIframeAdded||function(){},T=e.rel?"prefetch":"preload",w=e.containerElement||"article";return i.useEffect((function(){o&&N()}),[o]),i.createElement(i.Fragment,null,i.createElement("link",{rel:T,href:j,as:"image"}),i.createElement(i.Fragment,null,s&&i.createElement(i.Fragment,null,i.createElement("link",{rel:"preconnect",href:y}),i.createElement("link",{rel:"preconnect",href:"https://www.google.com"}),A&&i.createElement(i.Fragment,null,i.createElement("link",{rel:"preconnect",href:"https://static.doubleclick.net"}),i.createElement("link",{rel:"preconnect",href:"https://googleads.g.doubleclick.net"})))),i.createElement(w,{onPointerOver:function(){s||r(!0)},onClick:function(){o||c(!0)},className:"".concat(R," ").concat(o?I:""),"data-title":u,style:a({backgroundImage:"url(".concat(j,")")},{"--aspect-ratio":"".concat(_/C*100,"%")})},i.createElement("button",{type:"button",className:H,"aria-label":"".concat(g," ").concat(u)}),o&&i.createElement("iframe",{ref:n,className:k,title:u,width:"560",height:"315",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,src:b})))}))},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>r});var i=t(7294);const a={},s=i.createContext(a);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);