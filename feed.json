{
    "version": "https://jsonfeed.org/version/1",
    "title": "DigitallyRefined Blog",
    "home_page_url": "https://DigitallyRefined.github.io",
    "description": "DigitallyRefined Blog",
    "items": [
        {
            "id": "https://DigitallyRefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers",
            "content_html": "<p>By default Proxmox Unprivileged LXC containers only allow running Docker/Podman as <code>root</code>. In this guide we will set up rootless Docker inside an unprivileged LXC container.</p>\n<p>Allowing nesting namespaces three levels deep:<br>\n<strong>Proxmox Host</strong> → <strong>Unprivileged LXC</strong> → <strong>Rootless Docker/Podman</strong> → <strong>Docker in Docker (DinD)</strong>.</p>\n<!-- -->\n<p>Running Docker or Podman as root can be a bit of a security risk, especially as we've seen quite an increase in malware such as the <a href=\"https://www.microsoft.com/en-us/security/blog/2025/12/09/shai-hulud-2-0-guidance-for-detecting-investigating-and-defending-against-the-supply-chain-attack/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Shai-Hulud worm</a> and AI tools like <a href=\"https://github.com/openclaw/openclaw\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">OpenClaw</a> gaining full access to your machine.</p>\n<p>Running containers in an unprivileged LXC containers with rootless Docker/Podman adds an extra layer of security and reduces the blast radius, as even if a container is compromised, the attacker would still be limited by the unprivileged LXC and standard/non-admin user restrictions.</p>\n<!-- -->\n<div class=\"tableOfContentsInline_prmo\"><ul class=\"table-of-contents\"><li><a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#installation\">Installation</a></li><li><a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#video-transcoding\">Video transcoding</a></li><li><a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#forgejo-actions-via-docker-in-docker-dind\">Forgejo Actions via Docker in Docker (DinD)</a></li><li><a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#conclusion\">Conclusion</a></li><li><a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#additional-resources\">Additional resources</a></li></ul></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation\">Installation<a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#installation\" class=\"hash-link\" aria-label=\"Direct link to Installation\" title=\"Direct link to Installation\" translate=\"no\">​</a></h2>\n<p>After creating an unprivileged LXC container, first we'll need to navigate to our Proxmox dashboard and open up a console on the host.</p>\n<p>Now we can run the <a href=\"https://gist.github.com/DigitallyRefined/37dfcc68a146c59e2215c2b5b5fabecc\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">PVE LXC Unprivileged Rootless Docker script</a>:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">bash</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-c</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$(</span><span class=\"token string variable function\" style=\"color:#d73a49\">curl</span><span class=\"token string variable\" style=\"color:#36acaa\"> </span><span class=\"token string variable parameter variable\" style=\"color:#36acaa\">-fsSL</span><span class=\"token string variable\" style=\"color:#36acaa\"> https://gist.githubusercontent.com/DigitallyRefined/37dfcc68a146c59e2215c2b5b5fabecc/raw/3534b5c2e286fe4c57fb8f2367cef3349fb9f42a/pve-unprivileged-lxc-rootless-containers.sh</span><span class=\"token string variable\" style=\"color:#36acaa\">)</span><span class=\"token string\" style=\"color:#e3116c\">\"</span><br></span></code></pre></div></div>\n<div class=\"theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>warning</div><div class=\"admonitionContent_BuS1\"><p>Please <a href=\"https://gist.github.com/DigitallyRefined/37dfcc68a146c59e2215c2b5b5fabecc\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">review the script</a> before running it before running it on your system.</p><p>This script has been tested with a Debian 13 LXC on Proxmox 9.1.</p></div></div>\n<p>Review the list of LXC containers and confirm that you want to continue, select <code>Yes</code> on the GPU prompt and select the LXC container we created earlier from the list, once you confirm the script will run through the LXC containers adjusting the namespaces that we can use containers and container nesting (Docker in Docker) via non-root users.</p>\n<p>Once the script finishes updating the namespace, we need to SSH into the LXC container as root and install Docker and the <code>uidmap</code> package and create a non-root user to run rootless Docker:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> root@192.168</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">wget</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-qO</span><span class=\"token plain\"> get-docker.sh https://get.docker.com</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">sh</span><span class=\"token plain\"> get-docker.sh</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">apt</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">install</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-y</span><span class=\"token plain\"> uidmap</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">adduser user</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">exit</span><br></span></code></pre></div></div>\n<p>Now that we have Docker installed, we can SSH into the container as the non-root user we created (<code>test</code> in this case) and set up rootless Docker and test that it works correctly:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> user@192.168</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">dockerd-rootless-setuptool.sh </span><span class=\"token function\" style=\"color:#d73a49\">install</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> run </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--rm</span><span class=\"token plain\"> hello-world</span><br></span></code></pre></div></div>\n<p>If this works correctly, you should see a \"Hello from Docker!\" message confirming that rootless Docker is working inside the unprivileged LXC container.</p>\n<p>Now that we've confirmed rootless Docker is working, we can allow the Docker service to start on boot for the non-root user and disable the root Docker service:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> root@192.168</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">loginctl enable-linger user </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># replace 'user' with your non-root username</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl stop docker.service docker.socket</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl disable docker.service docker.socket</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl stop containerd.service</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl disable containerd.service</span><br></span></code></pre></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"video-transcoding\">Video transcoding<a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#video-transcoding\" class=\"hash-link\" aria-label=\"Direct link to Video transcoding\" title=\"Direct link to Video transcoding\" translate=\"no\">​</a></h2>\n<p>Now we have rootless Docker set up and working, we can try running a more complex container that uses hardware acceleration. In this example we'll use the <code>linuxserver/ffmpeg</code> container to generate a test video via the GPU using Intel Quick Sync Video (QSV) hardware acceleration:</p>\n<div class=\"theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></span>note</div><div class=\"admonitionContent_BuS1\"><p>This example assumes that your Proxmox host has an Intel CPU with integrated graphics (with Quick Sync video support) and that you select GPU passthrough in the previous step. If you're using a different GPU (e.g., NVIDIA or AMD), you'll need to adjust the device mapping and ffmpeg parameters accordingly.</p></div></div>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> run </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--rm</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-it</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--device</span><span class=\"token plain\"> /dev/dri:/dev/dri </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-v</span><span class=\"token plain\"> </span><span class=\"token variable\" style=\"color:#36acaa\">$(</span><span class=\"token variable builtin class-name\" style=\"color:#36acaa\">pwd</span><span class=\"token variable\" style=\"color:#36acaa\">)</span><span class=\"token plain\">:/data </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  linuxserver/ffmpeg </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-y</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><span class=\"token plain\"> lavfi </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-i</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:#36acaa\">testsrc</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">duration</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token number\" style=\"color:#36acaa\">5</span><span class=\"token plain\">:size</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">1280x720:rate</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token number\" style=\"color:#36acaa\">30</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><span class=\"token plain\"> lavfi </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-i</span><span class=\"token plain\"> </span><span class=\"token assign-left variable\" style=\"color:#36acaa\">sine</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">frequency</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token number\" style=\"color:#36acaa\">1000</span><span class=\"token plain\">:duration</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token number\" style=\"color:#36acaa\">5</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-c:v</span><span class=\"token plain\"> h264_qsv </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-preset</span><span class=\"token plain\"> fast </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-b:v</span><span class=\"token plain\"> 2M </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-c:a</span><span class=\"token plain\"> aac </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-b:a</span><span class=\"token plain\"> 128k </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-shortest</span><span class=\"token plain\"> /data/output.mp4</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">ls</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-lh</span><span class=\"token plain\"> output.mp4</span><br></span></code></pre></div></div>\n<p>If everything is set up correctly, you should see the output video file generated in the current directory, copying this back your computer should show that it created a 5 second <a href=\"https://en.wikipedia.org/wiki/Test_card\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">test card</a> video with both video and audio streams.</p>\n<p>This quick test shows that rootless Docker is able to access the GPU hardware acceleration from within an unprivileged LXC container and running Jellyfin or Plex should also run correctly.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"forgejo-actions-via-docker-in-docker-dind\">Forgejo Actions via Docker in Docker (DinD)<a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#forgejo-actions-via-docker-in-docker-dind\" class=\"hash-link\" aria-label=\"Direct link to Forgejo Actions via Docker in Docker (DinD)\" title=\"Direct link to Forgejo Actions via Docker in Docker (DinD)\" translate=\"no\">​</a></h2>\n<p>Another benefit of using this script allowing unprivileged LXC rootless Docker is that we can now run Docker in Docker (DinD). This allows us to run CI/CD runners such as Forgejo Actions or GitHub Actions runners that can build and run Docker containers as part of their workflows.</p>\n<details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary>Click to expand Git/SSH setup instructions</summary><div><div class=\"collapsibleContent_i85q\"><p><strong>As root on the LXC</strong></p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> root@192.168</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">apt</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">install</span><span class=\"token plain\"> acl</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">useradd</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--system</span><span class=\"token plain\"> --create-home </span><span class=\"token function\" style=\"color:#d73a49\">git</span><br></span></code></pre></div></div><p><code>/etc/ssh/sshd_config</code></p><div class=\"language-ini codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-ini codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">Match User git</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    AuthorizedKeysCommandUser user # &lt;-- replace with non-root user created earlier</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    AuthorizedKeysCommand /usr/local/bin/forgejo-authorized-keys.sh %u %t %k</span><br></span></code></pre></div></div><p><code>/usr/local/bin/forgejo-authorized-keys.sh</code></p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token shebang important\">#!/bin/bash</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">set</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-e</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">/usr/bin/docker </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-i</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-u</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">git</span><span class=\"token plain\"> forgejo </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  /usr/local/bin/forgejo keys </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--config</span><span class=\"token plain\"> /var/lib/gitea/custom/conf/app.ini </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-e</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">git</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-u</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$1</span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-t</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$2</span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-k</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"</span><span class=\"token string variable\" style=\"color:#36acaa\">$3</span><span class=\"token string\" style=\"color:#e3116c\">\"</span><br></span></code></pre></div></div><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">chmod</span><span class=\"token plain\"> +x /usr/local/bin/forgejo-authorized-keys.sh</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl restart sshd</span><br></span></code></pre></div></div><p><strong>As non-root user on the LXC</strong></p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> user@192.168</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--user</span><span class=\"token plain\"> edit </span><span class=\"token function\" style=\"color:#d73a49\">docker</span><br></span></code></pre></div></div><div class=\"language-ini codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-ini codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[Service]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">ExecStartPost=/usr/bin/setfacl -m u:git:rw %t/docker.sock</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">ExecStartPost=/usr/bin/chmod +x %t</span><br></span></code></pre></div></div><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--user</span><span class=\"token plain\"> daemon-reload</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">systemctl </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--user</span><span class=\"token plain\"> restart </span><span class=\"token function\" style=\"color:#d73a49\">docker</span><br></span></code></pre></div></div></div></div></details>\n<details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary>Click to expand Traefik setup instructions</summary><div><div class=\"collapsibleContent_i85q\"><p><strong>As root on the LXC:</strong></p><p><code>/etc/sysctl.d/99-custom.conf</code></p><div class=\"language-conf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-conf codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">net.ipv4.ping_group_range = 0 165535</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">net.ipv4.ip_unprivileged_port_start = 80</span><br></span></code></pre></div></div><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">reboot</span><br></span></code></pre></div></div><p><strong>As non-root user on the LXC:</strong></p><p><code>traefik/docker-compose.yml</code></p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Check migration guide first: https://doc.traefik.io/traefik/v3.6/migrate/v3/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://github.com/traefik/traefik/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> docker.io/traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">v3.6.7</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'traefik'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">ports</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'80:80'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'443:443'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># (Optional) Expose Dashboard</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># - '8080:8080' # Don't do this in production!</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data/config</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">ro</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data/certs</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/certs</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data/plugins</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/plugins</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">local</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">ro</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">XDG_RUNTIME_DIR</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\">/docker.sock</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/var/run/docker.sock</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">ro</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">init</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">healthcheck</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">test</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> wget </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">quiet </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">tries=1 </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">spider http</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">//127.0.0.1/ping </span><span class=\"token punctuation\" style=\"color:#393A34\">|</span><span class=\"token punctuation\" style=\"color:#393A34\">|</span><span class=\"token plain\"> bash </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">c 'kill </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">s 15 </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">1 </span><span class=\"token important\">&amp;&amp;</span><span class=\"token plain\"> (sleep 10; kill </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">s 9 </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">1)'</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">interval</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 30s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">timeout</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 60s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">retries</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">3</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">start_period</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 10s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> LEGO_DISABLE_CNAME_SUPPORT=true</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">env_file</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> .env</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'traefik'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">labels</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.enable</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.traefik-ping.rule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Host(`127.0.0.1`) </span><span class=\"token important\">&amp;&amp;</span><span class=\"token plain\"> Path(`/ping`)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.traefik-ping.entrypoints</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> web</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Override HTTPS redirect</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.traefik-ping.priority</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">2000</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">external</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><br></span></code></pre></div></div><p><code>traefik/.env</code></p><div class=\"language-env codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-env codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">DESEC_TOKEN= # Add your deSEC API token</span><br></span></code></pre></div></div><p>This example uses deSEC as the provider for Let's Encrypt DNS challenges, you can register for a free subdomain and get an API token from your <a href=\"https://desec.io/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">deSEC account</a> or bring your own domain.</p><p><code>traefik/config/traefik.yml</code></p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">entryPoints</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">web</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">address</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">80</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># (Optional) Redirect to HTTPS</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ---</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">http</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">redirections</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">entryPoint</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">to</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> websecure</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">scheme</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> https</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">priority</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">1000</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">websecure</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">address</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\":443\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">http</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">tls</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">certResolver</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">domains</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">main</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"example.dedyn.io\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:#00a4db\">sans</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"*.example.dedyn.io\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">ping</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">entryPoint</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> web</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">certificatesResolvers</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Staging environment (for testing)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">staging-desec-dns</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">acme</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">dnsChallenge</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">provider</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> desec</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">propagation</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">delayBeforeChecks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">240</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">email</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> you@example.com</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">storage</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> /certs/acme</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">letsencrypt</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">staging</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns.json</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">caServer</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'https://acme-staging-v02.api.letsencrypt.org/directory'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Production (after making sure staging works, as Let's Encrypt rate limits failed attempts/restarts)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">production-desec-dns</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">acme</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">dnsChallenge</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">provider</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> desec</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">propagation</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">delayBeforeChecks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">240</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">email</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> you@example.com</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">storage</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> /certs/acme</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">letsencrypt</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns.json</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">providers</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">docker</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">exposedByDefault</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">false</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Default is true</span><br></span></code></pre></div></div></div></div></details>\n<details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary>Click to expand Forgejo Actions via DinD setup instructions</summary><div><div class=\"collapsibleContent_i85q\"><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> user@192.168</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-p</span><span class=\"token plain\"> forgejo/runner</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> forgejo</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-p</span><span class=\"token plain\"> ./data/var/lib/gitea ./data/etc/gitea ./data/etc/act_runner</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">chown</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-R</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">100999</span><span class=\"token plain\">:100999 data</span><br></span></code></pre></div></div><p><code>forgejo/docker-compose.yml</code></p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">forgejo</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://codeberg.org/forgejo/forgejo/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> codeberg.org/forgejo/forgejo</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">14.0.1</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">rootless</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> forgejo</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">user</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 1000</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">1000</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ports:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">#   - '3000:3000'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">#   - '222:2222'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data/var/lib/gitea</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/var/lib/gitea</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data/etc/gitea</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/gitea</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> /etc/timezone</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/timezone</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">ro</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> /etc/localtime</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/localtime</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">ro</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> USER_UID=1000</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> USER_GID=1000</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__actions__ENABLED=true</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__webhook__ALLOWED_HOST_LIST=private</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\">100.64.0.0/10</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__repository.pull</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">request__DEFAULT_MERGE_STYLE=squash</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__repository__USE_COMPAT_SSH_URI=false</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__server__START_SSH_SERVER=false</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__server__SSH_PORT=22</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> FORGEJO__server__SSH_AUTHORIZED_KEYS_COMMAND_TEMPLATE=/usr/bin/docker </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">H unix</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">//$</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">XDG_RUNTIME_DIR</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\">/docker.sock exec </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">i </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">e SSH_ORIGINAL_COMMAND </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">u git forgejo </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">.AppPath</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">config=</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">.CustomConf</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"> serv key</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">.Key.ID</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">healthcheck</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">test</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"CMD\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"curl\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"-f\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"http://localhost:3000/\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">interval</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 5s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">retries</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">10</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">timeout</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 5s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"traefik\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">labels</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.enable</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.forgejo.entrypoints</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> web</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\">websecure</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.forgejo.rule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Host(`forgejo.example.dedyn.io`)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.forgejo.tls</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.forgejo.tls.certresolver</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.services.forgejo.loadbalancer.server.port</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">3000</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">dind</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://github.com/moby/moby/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> docker</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">29.1.5</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dind</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> dind</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">privileged</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\">            </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># DinD requires privileged (within rootless Docker)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">ports</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"2375:2375\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">DOCKER_TLS_CERTDIR</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"\"</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># disable TLS for simplicity internal only</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">healthcheck</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">test</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"CMD\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"docker\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"info\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">interval</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 2s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">timeout</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 2s</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">retries</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">10</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> dind</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/var/lib/docker</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"traefik\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">runner</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://code.forgejo.org/forgejo/runner/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> data.forgejo.org/forgejo/runner</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">12.6.2</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> forgejo</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">runner</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">depends_on</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">forgejo</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> service_healthy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">dind</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> service_healthy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Point runner to the DinD daemon</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">DOCKER_HOST</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> tcp</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">//dind</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">2375</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">env_file</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./.env</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">runner</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> runner</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/data</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data/etc/act_runner</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/act_runner</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./runner/config.yaml</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/act_runner/config.yaml</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"traefik\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">command</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> bash</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">c</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">|</span><span class=\"token scalar string\" style=\"color:#e3116c\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">        if [ ! -f /etc/act_runner/.runner ]; then</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          pushd /etc/act_runner</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          forgejo-runner register --no-interactive \\</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">            --instance https://forgejo.example.dedyn.io \\</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">            --name dind-runner \\</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">            --labels docker \\</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">            --token \"$$FORGEJO_RUNNER_REGISTRATION_TOKEN\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          popd</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">        fi</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">        ln -sf /etc/act_runner/.runner .</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">        forgejo-runner --config /etc/act_runner/config.yaml daemon</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">runner-data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">dind-data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">external</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><br></span></code></pre></div></div><p><code>forgejo/runner/config.yaml</code></p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">runner</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">envs</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">DOCKER_HOST</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> tcp</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">//forgejo.example.dedyn.io</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">2375</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># &lt;- replace with your LXC hostname</span><br></span></code></pre></div></div><p><code>forgejo/.env-runner</code></p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token assign-left variable\" style=\"color:#36acaa\">FORGEJO_RUNNER_REGISTRATION_TOKEN</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Add your Forgejo Actions runner registration token</span><br></span></code></pre></div></div></div></div></details>\n<p>Once the files are in place, we can start the Forgejo, Actions, DinD and Traefik services:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> network create traefik</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><span class=\"token plain\"> traefik/docker-compose.yml up </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-d</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><span class=\"token plain\"> forgejo/docker-compose.yml up </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-d</span><br></span></code></pre></div></div>\n<div class=\"theme-admonition theme-admonition-info admonition_xJq3 alert alert--info\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>info</div><div class=\"admonitionContent_BuS1\"><p>It can take take around 5 minutes for HTTPS/TLS certificates to be issued, keep the service running monitoring <code>docker compose -f traefik/docker-compose.yml logs -f</code> and check in the <code>certs</code> folder, as there will be a new section added to the JSON files under <code>PrivateKey</code> with a <code>Certificates</code> section once issued.</p><p>When first starting Traefik, it's recommended to use the <code>staging-desec-dns</code> resolver to avoid hitting Let's Encrypt rate limits while testing your setup. Once confirmed working, switch to <code>production-desec-dns</code>.</p></div></div>\n<p>Once Traefik and Forgejo are up and running, you should be able to navigate to your Forgejo instance using the URL you set earlier, e.g. <code>https://forgejo.example.dedyn.io</code>, and follow the installation wizard.</p>\n<p>After setting up your Forgejo instance, navigate to <strong>Site administration</strong> → <strong>Actions</strong> → <strong>Runners</strong> to create a new Action runner and copy the registration token into the <code>FORGEJO_RUNNER_REGISTRATION_TOKEN</code> variable in the <code>forgejo/.env-runner</code> file and use <code>docker compose -f forgejo/docker-compose.yml up -d --force-recreate</code> to pickup the new token and start the runner.</p>\n<p>Create a new Access token from <strong>Applications</strong> in your Forgejo account settings, with <code>issue</code>, <code>misc</code>, <code>organization</code>, <code>package</code>, and <code>repository</code> permissions and add it as a secret named <code>ACTIONS_TOKEN</code> under <strong>Actions</strong> → <strong>Secrets</strong>.</p>\n<p>Now workflows that use Docker will be able to run inside the unprivileged LXC container using rootless Docker in Docker (DinD).</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"conclusion\">Conclusion<a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#conclusion\" class=\"hash-link\" aria-label=\"Direct link to Conclusion\" title=\"Direct link to Conclusion\" translate=\"no\">​</a></h2>\n<p>Running the Docker daemon as <code>root</code> or simply granting a user Docker access via the <code>docker</code> group creates a large, unnecessary attack surface. I learned this the hard way: a typo in <code>sudoers</code> locked me out of one of my servers, and because Docker runs as <code>root</code> I was able to mount and fix the file from a container, a capability that should not have been possible.</p>\n<p><strong>Why unprivileged LXCs + rootless Docker matters</strong></p>\n<ul>\n<li class=\"\">Reduced blast radius: compromises are confined to the unprivileged LXC and the non-root user.</li>\n<li class=\"\">Safer CI/runner workflows: enables Docker-in-Docker (DinD) for runners without exposing host-level Docker.</li>\n<li class=\"\">Practical: GPU passthrough and hardware-accelerated workloads still work when configured correctly.</li>\n</ul>\n<p>For production and self-hosting deployments, prefer running container engines rootless inside unprivileged LXC containers, as it preserves container convenience while significantly lowering host risk.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"additional-resources\">Additional resources<a href=\"https://digitallyrefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers#additional-resources\" class=\"hash-link\" aria-label=\"Direct link to Additional resources\" title=\"Direct link to Additional resources\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://gist.github.com/DigitallyRefined/37dfcc68a146c59e2215c2b5b5fabecc\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">PVE LXC Unprivileged Rootless Docker - pve-unprivileged-lxc-rootless-containers.sh</a></li>\n<li class=\"\"><a href=\"https://docs.docker.com/engine/security/rootless/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Docker Rootless Mode</a></li>\n<li class=\"\"><a href=\"https://www.docker.com/resources/docker-in-docker-containerized-ci-workflows-dockercon-2023/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Docker in Docker (DinD)</a></li>\n<li class=\"\"><a href=\"https://pve.proxmox.com/wiki/Unprivileged_LXC_containers\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Proxmox Unprivileged LXC Containers</a></li>\n</ul>",
            "url": "https://DigitallyRefined.github.io/guides/PVE-unprivileged-LXC-rootless-containers",
            "title": "Proxmox Unprivileged LXC Rootless Docker/Podman",
            "summary": "By default Proxmox Unprivileged LXC containers only allow running Docker/Podman as root. In this guide we will set up rootless Docker inside an unprivileged LXC container.",
            "date_modified": "2026-02-04T00:00:00.000Z",
            "tags": [
                "Proxmox",
                "LXC",
                "Self-hosting",
                "Docker",
                "YouTube",
                "Video"
            ]
        },
        {
            "id": "https://DigitallyRefined.github.io/guides/Containers-Up",
            "content_html": "<p><a href=\"https://github.com/DigitallyRefined/containers-up\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Containers Up!</a> is an open source web-based container management platform designed to simplify the administration of containers across multiple remote hosts.</p>\n<p>It provides a unified interface for managing containerized applications, and automating updates with minimal manual intervention.</p>\n<p>This guide will step through setting up your own instance of Containers Up! and configuring Dependabot on GitHub or Renovate Bot with Forgejo.</p>\n<!-- -->\n<!-- -->\n<div class=\"tableOfContentsInline_prmo\"><ul class=\"table-of-contents\"><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#video\">Video</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#installation\">Installation</a><ul><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#prerequisites\">Prerequisites</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#basic-setup\">Basic Setup</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#adding-your-first-host\">Adding Your First Host</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#environment-variables\">Environment Variables</a></li></ul></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#setting-up-automated-updates\">Setting Up Automated Updates</a><ul><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#prerequisites-for-automation\">Prerequisites for Automation</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#option-a-github-with-dependabot\">Option A: GitHub with Dependabot</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#option-b-forgejo-with-renovate-bot\">Option B: Forgejo with Renovate Bot</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#how-it-works\">How It Works</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#optional-commit-squashing\">Optional: Commit Squashing</a></li></ul></li><li><a href=\"https://digitallyrefined.github.io/guides/Containers-Up#additional-resources\">Additional resources</a></li></ul></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"video\">Video<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#video\" class=\"hash-link\" aria-label=\"Direct link to Video\" title=\"Direct link to Video\" translate=\"no\">​</a></h2>\n<!-- -->\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=BXh_dP7b07k\" aria-label=\"Watch Containers Up! - A stable way to manage container updates on YouTube\">Watch &quot;<!-- -->Containers Up! - A stable way to manage container updates<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"Containers Up! - A stable way to manage container updates\" role=\"img\" aria-label=\"Containers Up! - A stable way to manage container updates - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/BXh_dP7b07k/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch Containers Up! - A stable way to manage container updates\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<a href=\"https://youtu.be/BXh_dP7b07k\">Watch on YouTube</a>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation\">Installation<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#installation\" class=\"hash-link\" aria-label=\"Direct link to Installation\" title=\"Direct link to Installation\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"prerequisites\">Prerequisites<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#prerequisites\" class=\"hash-link\" aria-label=\"Direct link to Prerequisites\" title=\"Direct link to Prerequisites\" translate=\"no\">​</a></h3>\n<p>Before getting started, you'll need:</p>\n<ul>\n<li class=\"\">A server or mini PC with Docker installed</li>\n<li class=\"\">SSH access to your server</li>\n<li class=\"\">(Optional) A domain name with HTTPS configured via <a href=\"https://doc.traefik.io/traefik/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Traefik</a> or similar reverse proxy (<a href=\"https://desec.io/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">deSEC</a> is a good way to test HTTPS with free subdomain and wildcard certificates)</li>\n<li class=\"\">(Optional) A Git repository (GitHub or Forgejo) for automated updates</li>\n<li class=\"\">(Optional) A VPS or tunnelling solution to expose your webhook port securely (<a href=\"https://aws.amazon.com/free/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">AWS</a> &amp; <a href=\"https://www.oracle.com/cloud/free/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Oracle Cloud</a> both have free VPS tiers to test this setup)</li>\n</ul>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"basic-setup\">Basic Setup<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#basic-setup\" class=\"hash-link\" aria-label=\"Direct link to Basic Setup\" title=\"Direct link to Basic Setup\" translate=\"no\">​</a></h3>\n<p>The simplest way to get started is with the following <code>compose.yml</code>:</p>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">containers-up</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://github.com/DigitallyRefined/containers-up/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> ghcr.io/digitallyrefined/containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">1.4.3</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">ports</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> 3000</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">3000</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Main dashboard</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> 3001</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">3001</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Webhook port</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./storage</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/storage</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./storage/.ssh</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/root/.ssh</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./storage/.docker</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/root/.docker</span><br></span></code></pre></div></div>\n<div class=\"theme-admonition theme-admonition-info admonition_xJq3 alert alert--info\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>info</div><div class=\"admonitionContent_BuS1\"><p>See the <a href=\"https://github.com/DigitallyRefined/containers-up\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Containers Up! GitHub repository</a> for the latest release tag.</p></div></div>\n<ol>\n<li class=\"\">Create a directory for Containers Up!: <code>mkdir containers-up &amp;&amp; cd containers-up</code></li>\n<li class=\"\">Save the above compose file</li>\n<li class=\"\">Start the service: <code>docker compose up -d</code></li>\n<li class=\"\">Open <code>http://localhost:3000</code> in your browser</li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"adding-your-first-host\">Adding Your First Host<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#adding-your-first-host\" class=\"hash-link\" aria-label=\"Direct link to Adding Your First Host\" title=\"Direct link to Adding Your First Host\" translate=\"no\">​</a></h3>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"creating-a-separate-ssh-key-for-the-app-to-use\">Creating a separate SSH Key for the app to use<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#creating-a-separate-ssh-key-for-the-app-to-use\" class=\"hash-link\" aria-label=\"Direct link to Creating a separate SSH Key for the app to use\" title=\"Direct link to Creating a separate SSH Key for the app to use\" translate=\"no\">​</a></h4>\n<p>Ideally you should create an SSH key pair specifically for Containers Up! to use:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">ssh-keygen </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-t</span><span class=\"token plain\"> ed25519 </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-C</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"containers-up\"</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><span class=\"token plain\"> ~/.ssh/containers-up</span><br></span></code></pre></div></div>\n<p>Then add the public key to your server's <code>~/.ssh/authorized_keys</code>:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">cat</span><span class=\"token plain\"> ~/.ssh/containers-up.pub </span><span class=\"token operator\" style=\"color:#393A34\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> user@yourhost </span><span class=\"token string\" style=\"color:#e3116c\">'cat &gt;&gt; ~/.ssh/authorized_keys'</span><br></span></code></pre></div></div>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"adding-the-host-in-containers-up\">Adding the Host in Containers Up!<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#adding-the-host-in-containers-up\" class=\"hash-link\" aria-label=\"Direct link to Adding the Host in Containers Up!\" title=\"Direct link to Adding the Host in Containers Up!\" translate=\"no\">​</a></h4>\n<p>When you first access the dashboard, you'll need to add a host:</p>\n<ol>\n<li class=\"\">\n<p>Click <strong>Add Host</strong> in the UI</p>\n</li>\n<li class=\"\">\n<p>Fill in the following required fields:</p>\n<ul>\n<li class=\"\"><strong>Name</strong>: A unique identifier (e.g., <code>my-server</code>) - lowercase letters, numbers, and hyphens only</li>\n<li class=\"\"><strong>SSH Host</strong>: Your server's SSH connection string in the format <code>user@hostname</code> or <code>user@ip-address</code></li>\n<li class=\"\"><strong>SSH Private Key</strong>: Paste your SSH private key (must be in OpenSSH format)</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Optional fields</strong> for automation:</p>\n<ul>\n<li class=\"\"><strong>Working Folder</strong>: Path to your compose files on the remote host (e.g., <code>/home/user/stacks</code>)</li>\n<li class=\"\"><strong>Repository Host</strong>: Git provider URL (default: <code>https://github.com</code>)</li>\n<li class=\"\"><strong>Repository</strong>: Your repo in format <code>username/repo</code></li>\n<li class=\"\"><strong>Bot Type</strong>: Choose <code>dependabot</code> (GitHub) or <code>renovate</code> (Forgejo)</li>\n<li class=\"\"><strong>Webhook Secret</strong>: Generate a random secret for webhook authentication</li>\n<li class=\"\"><strong>Exclude Folders</strong>: Regex pattern to exclude certain folders (e.g., <code>(manual|test)</code>)</li>\n<li class=\"\"><strong>Cron Schedule</strong>: When to check for image updates (e.g., <code>0 1 * * 6</code> for Saturdays at 1 AM)</li>\n<li class=\"\"><strong>Squash Updates</strong>: Enable to automatically combine multiple dependency update commits</li>\n</ul>\n</li>\n<li class=\"\">\n<p>Click <strong>Save</strong> - the system will validate your SSH connection and Docker availability</p>\n</li>\n</ol>\n<p>Once added, you'll see a dashboard showing:</p>\n<ul>\n<li class=\"\"><strong>Composed Containers</strong>: Services managed via compose files</li>\n<li class=\"\"><strong>Individual Containers</strong>: Standalone containers</li>\n<li class=\"\"><strong>Images</strong>: All Docker images on the host</li>\n<li class=\"\"><strong>Unused Images</strong>: Images that can be cleaned up</li>\n</ul>\n<details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary><strong>Setup with HTTPS &amp; Authentication (optional, but recommended!)</strong></summary><div><div class=\"collapsibleContent_i85q\"><p>For production deployments with secure HTTPS access and authentication, you can use Traefik as a reverse proxy with Pocket ID for OpenID Connect authentication.</p><h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"traefik-certificate-resolver-configuration\">Traefik Certificate Resolver Configuration<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#traefik-certificate-resolver-configuration\" class=\"hash-link\" aria-label=\"Direct link to Traefik Certificate Resolver Configuration\" title=\"Direct link to Traefik Certificate Resolver Configuration\" translate=\"no\">​</a></h4><p>Before deploying, you'll need to configure Traefik's certificate resolver for automatic HTTPS certificates. Create or update your Traefik configuration file at <code>./traefik/config/traefik.yml</code>:</p><p><strong>Setting up deSEC DNS Challenge:</strong></p><p>This example uses <a href=\"https://desec.io/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">deSEC</a> for a free subdomain and DNS challenge to obtain wildcard certificates, but you can also use other providers such as Cloudflare.</p><p>If using the <code>production-desec-dns</code> resolver, you'll need to provide your deSEC API token to Traefik:</p><ol>\n<li class=\"\">\n<p>Sign up for a free account at <a href=\"https://desec.io/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">deSEC.io</a> and create a domain</p>\n</li>\n<li class=\"\">\n<p>Generate an API token in your deSEC dashboard</p>\n</li>\n<li class=\"\">\n<p>Create a <code>.env</code> file in the same directory as your <code>compose.yml</code>:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># deSEC API Token for Traefik DNS Challenge</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token assign-left variable\" style=\"color:#36acaa\">DESEC_TOKEN</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">your_desec_api_token_goes_here</span><br></span></code></pre></div></div>\n</li>\n<li class=\"\">\n<p>Update your Traefik service in <code>compose.yml</code> to use the <code>.env</code> file:</p>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">v</span><span class=\"token punctuation\" style=\"color:#393A34\">...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ... other settings ...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">env_file</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./.env</span><br></span></code></pre></div></div>\n</li>\n<li class=\"\">\n<p>Make sure to add <code>.env</code> to your <code>.gitignore</code> to avoid committing sensitive tokens</p>\n</li>\n</ol><details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary>Click to expand Traefik certificate resolver configuration</summary><div><div class=\"collapsibleContent_i85q\"><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">certificatesResolvers</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Staging environment (for testing)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">staging-desec-dns</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">acme</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">dnsChallenge</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">provider</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> desec</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">propagation</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">delayBeforeChecks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">240</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">email</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> you@example.com</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">storage</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> /certs/acme</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">letsencrypt</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">staging</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns.json</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">caServer</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'https://acme-staging-v02.api.letsencrypt.org/directory'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Production (after making sure staging works, as Let's Encrypt rate limits failed attempts/restarts)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">production-desec-dns</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">acme</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">dnsChallenge</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">provider</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> desec</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">propagation</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">delayBeforeChecks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">240</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">email</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> you@example.com</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">storage</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> /certs/acme</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">letsencrypt</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns.json</span><br></span></code></pre></div></div></div></div></details><h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"complete-setup-example\">Complete Setup Example<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#complete-setup-example\" class=\"hash-link\" aria-label=\"Direct link to Complete Setup Example\" title=\"Direct link to Complete Setup Example\" translate=\"no\">​</a></h4><details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary>Click to expand complete <code>compose.yml</code> with all three services</summary><div><div class=\"collapsibleContent_i85q\"><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">containers-up</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://github.com/DigitallyRefined/containers-up/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> ghcr.io/digitallyrefined/containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">1.4.3</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up/storage</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/storage</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up/storage/.ssh</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/root/.ssh</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up/storage/.docker</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/root/.docker</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">env_file</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./.env </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Create this file based on .env.default</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> traefik</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">labels</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.enable</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Main dashboard (requires authentication)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up.entrypoints</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> websecure</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up.rule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Host(`containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up.example.dedyn.io`)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up.tls</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up.tls.certresolver</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up.service</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.services.containers-up.loadbalancer.server.port</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">3000</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Webhook endpoint (public access for GitHub/Forgejo webhooks)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up-webhook.entrypoints</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> websecure</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up-webhook.rule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Host(`containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up.example.dedyn.io`) </span><span class=\"token important\">&amp;&amp;</span><span class=\"token plain\"> PathPrefix(`/api/webhook`)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up-webhook.tls</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up-webhook.tls.certresolver</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.containers-up-webhook.service</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">webhook</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.services.containers-up-webhook.loadbalancer.server.port</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">3001</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">pocket-id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://github.com/pocket-id/pocket-id/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> ghcr.io/pocket</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">id/pocket</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">v2.2.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'./pocket-id/data:/app/data'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> APP_URL=https</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">//id.example.dedyn.io</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> TRUST_PROXY=true</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ENCRYPTION_KEY=\"run `openssl rand </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">base64 32`\" </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Generate a unique key</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'traefik'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">labels</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.enable</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.pocketid.entrypoints</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> websecure</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.pocketid.rule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Host(`id.example.dedyn.io`)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.pocketid.tls</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik.http.routers.pocketid.tls.certresolver</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> production</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">desec</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># https://github.com/traefik/traefik/releases</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">v3.6.7</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'traefik'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">ports</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'80:80'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'443:443'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> LEGO_DISABLE_CNAME_SUPPORT=true</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./traefik/config</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/traefik</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> /var/run/docker.sock</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/var/run/docker.sock</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">ro</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'traefik'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">networks</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">external</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><br></span></code></pre></div></div><div class=\"theme-admonition theme-admonition-info admonition_xJq3 alert alert--info\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>info</div><div class=\"admonitionContent_BuS1\"><p>It can take take around 5 minutes for certificates to be issued, keep the service running monitoring <code>docker compose logs -f</code> and check in the <code>certs</code> folder, as there will be a new section added to the JSON files under <code>PrivateKey</code> with a <code>Certificates</code> section once issued.</p><p>When first starting Traefik, it's recommended to use the <code>staging-desec-dns</code> resolver to avoid hitting Let's Encrypt rate limits while testing your setup. Once confirmed working, switch to <code>production-desec-dns</code>.</p></div></div></div></div></details><p><strong>Notes:</strong></p><ul>\n<li class=\"\">Replace <code>you@example.com</code> with your actual email address</li>\n<li class=\"\">The <code>production-desec-dns</code> resolver uses DNS challenge with <a href=\"https://desec.io/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">deSEC</a> provider (free DNS service with API support)</li>\n<li class=\"\">DNS challenge is recommended for wildcard certificates or when port 80 is not accessible</li>\n<li class=\"\">The <code>storage</code> path must match a volume mounted in your Traefik container (e.g., <code>./traefik/certs:/certs</code>)</li>\n</ul><p>See the <a href=\"https://doc.traefik.io/traefik/https/acme/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Traefik ACME documentation</a> for more certificate resolver options.</p><h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"setup-steps\">Setup Steps<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#setup-steps\" class=\"hash-link\" aria-label=\"Direct link to Setup Steps\" title=\"Direct link to Setup Steps\" translate=\"no\">​</a></h4><ol>\n<li class=\"\">\n<p><strong>Update domains</strong> in the compose file:</p>\n<ul>\n<li class=\"\">Replace <code>containers-up.example.dedyn.io</code> with your Containers Up! domain</li>\n<li class=\"\">Replace <code>id.example.dedyn.io</code> with your Pocket ID domain</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Generate encryption key</strong> for Pocket ID:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">openssl rand </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-base64</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">32</span><br></span></code></pre></div></div>\n</li>\n<li class=\"\">\n<p><strong>Create the network and start services</strong>:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> network create traefik</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose up </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-d</span><br></span></code></pre></div></div>\n</li>\n<li class=\"\">\n<p><strong>Configure Pocket ID</strong>:</p>\n<ul>\n<li class=\"\">Navigate to your Pocket ID instance (<code>https://id.example.dedyn.io</code>)</li>\n<li class=\"\">Follow the <a href=\"https://pocket-id.org/docs/setup/installation\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Pocket ID setup guide</a> to create an admin user</li>\n<li class=\"\">Optionally create an admin group and add your user to it</li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Create OIDC Client in Pocket ID</strong>:</p>\n<ul>\n<li class=\"\">In Pocket ID admin, create a new OIDC client</li>\n<li class=\"\">Set the callback URL to: <code>https://containers-up.example.dedyn.io/auth-callback</code></li>\n<li class=\"\">Optionally restrict access to the admin group only</li>\n<li class=\"\">Copy the <strong>Client ID</strong> and <strong>Client Secret</strong></li>\n</ul>\n</li>\n<li class=\"\">\n<p><strong>Configure Containers Up! OIDC</strong>:</p>\n<p>Create a <code>.env</code> file with the following OIDC configuration:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># OpenID Connect Authentication</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token assign-left variable\" style=\"color:#36acaa\">ENV_PUBLIC_OIDC_ISSUER_URI</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">https://id.example.dedyn.io</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token assign-left variable\" style=\"color:#36acaa\">ENV_PUBLIC_OIDC_CLIENT_ID</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">your_client_id_here</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token assign-left variable\" style=\"color:#36acaa\">OIDC_CLIENT_SECRET</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">your_client_secret_here</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># OIDC_JWKS_URL=https://id.example.dedyn.io/.well-known/jwks.json  # Optional: only needed if auto-discovery fails</span><br></span></code></pre></div></div>\n</li>\n<li class=\"\">\n<p><strong>Restart Containers Up!</strong>:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose restart containers-up</span><br></span></code></pre></div></div>\n</li>\n<li class=\"\">\n<p><strong>Test authentication</strong>:</p>\n<ul>\n<li class=\"\">Navigate to <code>https://containers-up.example.dedyn.io</code></li>\n<li class=\"\">You should be redirected to Pocket ID for login</li>\n<li class=\"\">After successful login, you'll be redirected back to Containers Up!</li>\n</ul>\n</li>\n</ol><h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"notes\">Notes<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#notes\" class=\"hash-link\" aria-label=\"Direct link to Notes\" title=\"Direct link to Notes\" translate=\"no\">​</a></h4><ul>\n<li class=\"\">The <strong>main dashboard</strong> (port 3000) is protected by OIDC authentication</li>\n<li class=\"\">The <strong>webhook endpoint</strong> (port 3001) remains publicly accessible but is secured by webhook signature verification</li>\n<li class=\"\">Make sure your <code>.env</code> file is not committed to Git (add it to <code>.gitignore</code>)</li>\n<li class=\"\">See the <a href=\"https://pocket-id.org/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Pocket ID documentation</a> for advanced configuration options</li>\n</ul></div></div></details>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"environment-variables\">Environment Variables<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#environment-variables\" class=\"hash-link\" aria-label=\"Direct link to Environment Variables\" title=\"Direct link to Environment Variables\" translate=\"no\">​</a></h3>\n<p>Optional configuration such as authentication and notifications can be set via a <code>.env</code> file:</p>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">containers-up</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> ghcr.io/digitallyrefined/containers</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">up</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">1.4.3</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ... other settings ...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">env_file</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./.env</span><br></span></code></pre></div></div>\n<p>See the full list in the <a href=\"https://github.com/DigitallyRefined/containers-up/blob/main/.env.default\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">repository's <code>.env.default</code></a> file.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"setting-up-automated-updates\">Setting Up Automated Updates<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#setting-up-automated-updates\" class=\"hash-link\" aria-label=\"Direct link to Setting Up Automated Updates\" title=\"Direct link to Setting Up Automated Updates\" translate=\"no\">​</a></h2>\n<p>One of Containers Up!'s most powerful features is automated container updates via Git-based workflows. This section covers setting up Dependabot (GitHub) or Renovate (Forgejo) to automatically create pull requests when new container images are available.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"prerequisites-for-automation\">Prerequisites for Automation<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#prerequisites-for-automation\" class=\"hash-link\" aria-label=\"Direct link to Prerequisites for Automation\" title=\"Direct link to Prerequisites for Automation\" translate=\"no\">​</a></h3>\n<p>Before configuring automated updates:</p>\n<ol>\n<li class=\"\">\n<p>Your Containers Up! instance must be <strong>publicly accessible via HTTPS</strong> on port <code>3001</code> (webhook port)</p>\n<ul>\n<li class=\"\">You can use <a href=\"https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Cloudflare Tunnels</a>, <a href=\"https://pangolin.net/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Pangolin</a>, <a href=\"https://github.com/DigitallyRefined/docker-wireguard-tunnel\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Docker WireGuard Tunnel</a>, or see <a href=\"https://github.com/anderspitman/awesome-tunneling\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Awesome Tunnelling</a> for even more options</li>\n</ul>\n</li>\n<li class=\"\">\n<p>Create a Git repository with your <code>compose.yml</code> or <code>docker-compose.yml</code> files</p>\n</li>\n<li class=\"\">\n<p><strong>Pin all image versions</strong> - replace <code>:latest</code> tags with specific versions:</p>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ❌ Don't use this</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> traefik</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ❌ Or this</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">latest</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># ✅ Use specific versions</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> traefik</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">v3.6.7</span><br></span></code></pre></div></div>\n</li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"option-a-github-with-dependabot\">Option A: GitHub with Dependabot<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#option-a-github-with-dependabot\" class=\"hash-link\" aria-label=\"Direct link to Option A: GitHub with Dependabot\" title=\"Direct link to Option A: GitHub with Dependabot\" translate=\"no\">​</a></h3>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-enable-github-actions\">1. Enable GitHub Actions<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#1-enable-github-actions\" class=\"hash-link\" aria-label=\"Direct link to 1. Enable GitHub Actions\" title=\"Direct link to 1. Enable GitHub Actions\" translate=\"no\">​</a></h4>\n<p>In your repository <strong>Settings &gt; Actions &gt; General</strong>:</p>\n<ul>\n<li class=\"\">Enable <strong>Allow all actions and reusable workflows</strong></li>\n<li class=\"\">Under <strong>Workflow permissions</strong>, allow <strong>Read and write permissions</strong></li>\n<li class=\"\">Allow <strong>GitHub Actions to create and approve pull requests</strong></li>\n</ul>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-create-dependabot-template\">2. Create Dependabot Template<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#2-create-dependabot-template\" class=\"hash-link\" aria-label=\"Direct link to 2. Create Dependabot Template\" title=\"Direct link to 2. Create Dependabot Template\" translate=\"no\">​</a></h4>\n<p>Create <code>.github/dependabot.template.yml</code>:</p>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">version</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">2</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">enable-beta-ecosystems</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:#36acaa\">true</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Remove once docker-compose updates become stable</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">updates</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">package-ecosystem</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'docker-compose'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">directory</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'**/docker-compose.yml'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">schedule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">interval</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'weekly'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">day</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'saturday'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">time</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'01:23'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">timezone</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'Europe/London'</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># &lt;-- Change to your timezone</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">package-ecosystem</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'github-actions'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">directory</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'/'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">schedule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">interval</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'weekly'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">day</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'saturday'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">time</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'01:23'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">timezone</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'Europe/London'</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># &lt;-- Change to your timezone</span><br></span></code></pre></div></div>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"3-add-github-action-to-generate-dependabot-config\">3. Add GitHub Action to Generate Dependabot Config<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#3-add-github-action-to-generate-dependabot-config\" class=\"hash-link\" aria-label=\"Direct link to 3. Add GitHub Action to Generate Dependabot Config\" title=\"Direct link to 3. Add GitHub Action to Generate Dependabot Config\" translate=\"no\">​</a></h4>\n<p>Create <code>.github/workflows/generate_dependabot.yml</code>:</p>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Generate dependabot.yml</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">on</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">push</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">branches</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> main</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">repository_dispatch</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">workflow_dispatch</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">jobs</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">generate</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">runs-on</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> ubuntu</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">latest</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">steps</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">uses</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> actions/checkout@v6</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Generate dependabot.yml</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">uses</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Makeshift/generate</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dependabot</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">glob</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">action@master</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Create Pull Request</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">uses</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> peter</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">evans/create</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">pull</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">request@v8</span><br></span></code></pre></div></div>\n<p>This workflow will automatically create a managed <code>.github/dependabot.yml</code> file that updates as you add new compose files.</p>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"4-configure-webhook-in-containers-up\">4. Configure Webhook in Containers Up!<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#4-configure-webhook-in-containers-up\" class=\"hash-link\" aria-label=\"Direct link to 4. Configure Webhook in Containers Up!\" title=\"Direct link to 4. Configure Webhook in Containers Up!\" translate=\"no\">​</a></h4>\n<p>In the Containers Up! dashboard:</p>\n<ol>\n<li class=\"\">Edit your host configuration</li>\n<li class=\"\">Set the <strong>Working Folder</strong> (e.g., <code>/home/user/stacks</code>)</li>\n<li class=\"\">Set <strong>Repository</strong> to <code>username/repo</code></li>\n<li class=\"\">Generate a random <strong>Webhook Secret</strong> (e.g., using <code>openssl rand -hex 32</code>)</li>\n<li class=\"\">Click the ℹ️ icon to view your webhook URL (will look like: <code>https://containers-up.example.dedyn.io/api/webhook/github/host/YOUR_HOST</code>)</li>\n<li class=\"\">Save the host configuration</li>\n</ol>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"5-configure-github-webhook\">5. Configure GitHub Webhook<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#5-configure-github-webhook\" class=\"hash-link\" aria-label=\"Direct link to 5. Configure GitHub Webhook\" title=\"Direct link to 5. Configure GitHub Webhook\" translate=\"no\">​</a></h4>\n<p>In your GitHub repository <strong>Settings &gt; Webhooks &gt; Add webhook</strong>:</p>\n<ol>\n<li class=\"\"><strong>Payload URL</strong>: Your webhook URL from step 4</li>\n<li class=\"\"><strong>Content type</strong>: <code>application/json</code></li>\n<li class=\"\"><strong>Secret</strong>: The same webhook secret from Containers Up!</li>\n<li class=\"\"><strong>Events</strong>: Select <strong>Let me select individual events</strong> and choose <strong>Pull requests</strong></li>\n<li class=\"\">Click <strong>Add webhook</strong></li>\n</ol>\n<p>Test it by clicking the webhook and selecting <strong>Recent Deliveries &gt; Redeliver</strong>. You should see a \"ping\" event in the Containers Up! logs.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"option-b-forgejo-with-renovate-bot\">Option B: Forgejo with Renovate Bot<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#option-b-forgejo-with-renovate-bot\" class=\"hash-link\" aria-label=\"Direct link to Option B: Forgejo with Renovate Bot\" title=\"Direct link to Option B: Forgejo with Renovate Bot\" translate=\"no\">​</a></h3>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"1-create-access-tokens\">1. Create Access Tokens<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#1-create-access-tokens\" class=\"hash-link\" aria-label=\"Direct link to 1. Create Access Tokens\" title=\"Direct link to 1. Create Access Tokens\" translate=\"no\">​</a></h4>\n<p>In Forgejo <strong>Settings &gt; Application</strong>:</p>\n<ol>\n<li class=\"\">Create an <strong>Access Token</strong> with the permissions listed in the <a href=\"https://docs.renovatebot.com/modules/platform/forgejo/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Renovate Forgejo docs</a></li>\n<li class=\"\">In <strong>Actions &gt; Secrets</strong>:<!-- -->\n<ul>\n<li class=\"\">Create <code>ACTIONS_TOKEN</code> with your Forgejo token</li>\n<li class=\"\">Create <code>EXTERNAL_GITHUB_TOKEN</code> with a GitHub Personal Access Token (for fetching changelogs)</li>\n</ul>\n</li>\n</ol>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"2-create-renovate-workflow\">2. Create Renovate Workflow<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#2-create-renovate-workflow\" class=\"hash-link\" aria-label=\"Direct link to 2. Create Renovate Workflow\" title=\"Direct link to 2. Create Renovate Workflow\" translate=\"no\">​</a></h4>\n<details class=\"details_lb9f alert alert--info details_b_Ee\" data-collapsed=\"true\"><summary>Click to expand <code>.forgejo/workflows/renovate.yml</code></summary><div><div class=\"collapsibleContent_i85q\"><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Renovate</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">on</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">push</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">branches</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> main</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'renovate/**'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">schedule</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># At 02:00, only on Saturday</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">cron</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'0 2 * * 6'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">issues</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">types</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> edited</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">workflow_dispatch</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Allow manual trigger</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">jobs</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">renovate</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">runs-on</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> docker</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> renovate/renovate</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">43.0.6</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">steps</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Restore Renovate Cache</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">uses</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> actions/cache@v5</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">with</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">path</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> github.workspace </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\">/renovate</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">cache</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">key</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> renovate</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">cache</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">$</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> runner.os </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">restore-keys</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">|</span><span class=\"token scalar string\" style=\"color:#e3116c\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">            renovate-cache-</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Set Git identity</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">run</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">|</span><span class=\"token scalar string\" style=\"color:#e3116c\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          git config --global user.name \"Renovate Bot\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token scalar string\" style=\"color:#e3116c\">          git config --global user.email \"renovate@localhost\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Run Renovate</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">env</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">LOG_LEVEL</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> info</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">RENOVATE_PLATFORM</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> forgejo</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">RENOVATE_ENDPOINT</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> github.api_url </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># GitHub variables still work in Forgejo</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">RENOVATE_TOKEN</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> secrets.ACTIONS_TOKEN </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">RENOVATE_REPOSITORIES</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> github.repository </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">RENOVATE_GITHUB_COM_TOKEN</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> secrets.EXTERNAL_GITHUB_TOKEN </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">RENOVATE_CACHE_DIR</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> $</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> github.workspace </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\">/renovate</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">cache</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">run</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> renovate</span><br></span></code></pre></div></div></div></div></details>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"3-configure-webhook-in-containers-up\">3. Configure Webhook in Containers Up!<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#3-configure-webhook-in-containers-up\" class=\"hash-link\" aria-label=\"Direct link to 3. Configure Webhook in Containers Up!\" title=\"Direct link to 3. Configure Webhook in Containers Up!\" translate=\"no\">​</a></h4>\n<p>Similar to GitHub setup:</p>\n<ol>\n<li class=\"\">Edit your host, set <strong>Bot Type</strong> to <code>renovate</code></li>\n<li class=\"\">Set <strong>Working Folder</strong>, <strong>Repository</strong> (<code>username/repo</code>)</li>\n<li class=\"\">Set <strong>Repository Host</strong> to your Forgejo URL (e.g., <code>https://git.example.dedyn.io</code>)</li>\n<li class=\"\">Generate a <strong>Webhook Secret</strong></li>\n<li class=\"\">Note the webhook URL (will include <code>/forgejo/</code> in the path)</li>\n</ol>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"4-configure-forgejo-webhook\">4. Configure Forgejo Webhook<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#4-configure-forgejo-webhook\" class=\"hash-link\" aria-label=\"Direct link to 4. Configure Forgejo Webhook\" title=\"Direct link to 4. Configure Forgejo Webhook\" translate=\"no\">​</a></h4>\n<p>In your Forgejo repository <strong>Settings &gt; Webhooks &gt; Add Forgejo webhook</strong>:</p>\n<ol>\n<li class=\"\"><strong>Target URL</strong>: Your webhook URL</li>\n<li class=\"\"><strong>HTTP Method</strong>: <code>POST</code></li>\n<li class=\"\"><strong>Content Type</strong>: <code>application/json</code></li>\n<li class=\"\"><strong>Secret</strong>: Your webhook secret</li>\n<li class=\"\"><strong>Trigger On</strong>: <strong>Custom events &gt; Pull request modifications</strong></li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"how-it-works\">How It Works<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#how-it-works\" class=\"hash-link\" aria-label=\"Direct link to How It Works\" title=\"Direct link to How It Works\" translate=\"no\">​</a></h3>\n<p>Once configured, the workflow is:</p>\n<ol>\n<li class=\"\"><strong>Dependabot/Renovate</strong> scans your compose files weekly (or on your schedule)</li>\n<li class=\"\">When a new image version is found, a <strong>Pull Request</strong> is created</li>\n<li class=\"\">The PR triggers a <strong>webhook</strong> to Containers Up!</li>\n<li class=\"\">Containers Up! displays the update in the dashboard with a notification</li>\n<li class=\"\">You <strong>review the changelog</strong> and decide whether to merge</li>\n<li class=\"\">When merged, another webhook triggers Containers Up! to:<!-- -->\n<ul>\n<li class=\"\">Pull the updated compose file from Git</li>\n<li class=\"\">Pull the new Docker image</li>\n<li class=\"\">Restart the containers with the new image</li>\n</ul>\n</li>\n</ol>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"optional-commit-squashing\">Optional: Commit Squashing<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#optional-commit-squashing\" class=\"hash-link\" aria-label=\"Direct link to Optional: Commit Squashing\" title=\"Direct link to Optional: Commit Squashing\" translate=\"no\">​</a></h3>\n<p>If you enable <strong>Squash Updates</strong> in your host configuration, Containers Up! will automatically combine multiple dependency update commits to keep your Git history clean. This is useful when multiple PRs are merged in quick succession.</p>\n<p>The squashing behavior can be customised with environment variables:</p>\n<ul>\n<li class=\"\"><code>SQUASH_UPDATE_MESSAGE</code>: Commit message prefix (default: <code>Update dependencies</code>)</li>\n<li class=\"\"><code>SQUASH_DAYS_AGO</code>: Number of days before considering a commit too old to squash with newer dependency updates (default: <code>5</code> days)</li>\n<li class=\"\"><code>SQUASH_MAX_UPDATE_COMMITS</code>: Maximum number of dependency update commits to keep before squashing the oldest two together (default: <code>5</code>)</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"additional-resources\">Additional resources<a href=\"https://digitallyrefined.github.io/guides/Containers-Up#additional-resources\" class=\"hash-link\" aria-label=\"Direct link to Additional resources\" title=\"Direct link to Additional resources\" translate=\"no\">​</a></h2>\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=c8f-YPiUBZM\" aria-label=\"Watch Self-hosted Cloudflare + VPN replacement! Pangolin Tutorial on YouTube\">Watch &quot;<!-- -->Self-hosted Cloudflare + VPN replacement! Pangolin Tutorial<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"Self-hosted Cloudflare + VPN replacement! Pangolin Tutorial\" role=\"img\" aria-label=\"Self-hosted Cloudflare + VPN replacement! Pangolin Tutorial - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/c8f-YPiUBZM/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch Self-hosted Cloudflare + VPN replacement! Pangolin Tutorial\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<ul>\n<li class=\"\">\n<a href=\"https://youtu.be/c8f-YPiUBZM\"><p>Self-hosted Cloudflare + VPN replacement! Pangolin Tutorial</p></a>\n</li>\n</ul>\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=GKyMXguNcos\" aria-label=\"Watch DITCH PASSWORDS: Self-Host PassKeys with Pocket ID on YouTube\">Watch &quot;<!-- -->DITCH PASSWORDS: Self-Host PassKeys with Pocket ID<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"DITCH PASSWORDS: Self-Host PassKeys with Pocket ID\" role=\"img\" aria-label=\"DITCH PASSWORDS: Self-Host PassKeys with Pocket ID - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/GKyMXguNcos/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch DITCH PASSWORDS: Self-Host PassKeys with Pocket ID\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<ul>\n<li class=\"\">\n<a href=\"https://youtu.be/GKyMXguNcos\"><p>DITCH PASSWORDS: Self-Host PassKeys with Pocket ID</p></a>\n</li>\n</ul>\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=-hfejNXqOzA\" aria-label=\"Watch Simple HTTPs for Docker! // Traefik Tutorial (updated) on YouTube\">Watch &quot;<!-- -->Simple HTTPs for Docker! // Traefik Tutorial (updated)<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"Simple HTTPs for Docker! // Traefik Tutorial (updated)\" role=\"img\" aria-label=\"Simple HTTPs for Docker! // Traefik Tutorial (updated) - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/-hfejNXqOzA/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch Simple HTTPs for Docker! // Traefik Tutorial (updated)\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<ul>\n<li class=\"\">\n<a href=\"https://youtu.be/-hfejNXqOzA\"><p>Simple HTTPs for Docker! // Traefik Tutorial (updated)</p></a>\n</li>\n</ul>",
            "url": "https://DigitallyRefined.github.io/guides/Containers-Up",
            "title": "Containers Up!",
            "summary": "Containers Up! is an open source web-based container management platform designed to simplify the administration of containers across multiple remote hosts.",
            "date_modified": "2026-01-31T00:00:00.000Z",
            "tags": [
                "Tunnelling",
                "Self-hosting",
                "Docker",
                "YouTube",
                "Video"
            ]
        },
        {
            "id": "https://DigitallyRefined.github.io/guides/Everything-Presence-Lite-sensor",
            "content_html": "<p>The <a href=\"https://shop.everythingsmart.io/products/everything-presence-lite\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Everything Presence Lite</a> sensor was release in October 2023 for £28 or around $30 (plus postage) from <a href=\"https://shop.everythingsmart.io/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Everything Smart Technology</a>.</p>\n<!-- -->\n<!-- -->\n<div class=\"tableOfContentsInline_prmo\"><ul class=\"table-of-contents\"><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#video\">Video</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#features\">Features</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#pros\">Pros</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#cons\">Cons</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#home-assistant-automations\">Home Assistant automations</a><ul><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#on---lights-on-when-dark--presence-detected\">On - Lights on when dark &amp; presence detected</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#off---lights-no-occupancy\">Off - Lights (no occupancy)</a></li></ul></li><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#home-assistant-scripts\">Home Assistant scripts</a><ul><li><a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#off---slowly-turn-off-lights-no-occupancy\">Off - Slowly turn off lights (no occupancy)</a></li></ul></li></ul></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"video\">Video<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#video\" class=\"hash-link\" aria-label=\"Direct link to Video\" title=\"Direct link to Video\" translate=\"no\">​</a></h2>\n<!-- -->\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=HABmLjZ2mWQ\" aria-label=\"Watch Everything Presence Lite sensor - Quick look, unboxing and setup on YouTube\">Watch &quot;<!-- -->Everything Presence Lite sensor - Quick look, unboxing and setup<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"Everything Presence Lite sensor - Quick look, unboxing and setup\" role=\"img\" aria-label=\"Everything Presence Lite sensor - Quick look, unboxing and setup - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/HABmLjZ2mWQ/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch Everything Presence Lite sensor - Quick look, unboxing and setup\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<a href=\"https://youtu.be/HABmLjZ2mWQ\">Watch on YouTube</a>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"features\">Features<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#features\" class=\"hash-link\" aria-label=\"Direct link to Features\" title=\"Direct link to Features\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Precise mmWave radar motion detector</li>\n<li class=\"\">Light luminosity (or room brightness) sensor</li>\n<li class=\"\">WiFi</li>\n<li class=\"\">Bluetooth repeater/Home Assistant proxy</li>\n<li class=\"\">ESP32 (can be extended using GPIO pins)</li>\n<li class=\"\">3D printed case</li>\n<li class=\"\">USB-C</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pros\">Pros<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#pros\" class=\"hash-link\" aria-label=\"Direct link to Pros\" title=\"Direct link to Pros\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Relatively inexpensive way to add presence, motion and room brightness data to your smart home</li>\n<li class=\"\">Much more sensitive than a regular PIR motion sensor and can easily detect people that are sitting still</li>\n<li class=\"\">Can perform automatons based on sensor data, such as turning on/off lights</li>\n<li class=\"\">Beta zones feature can perform different actions/automations based on where the motion/presence was detected</li>\n<li class=\"\">Can see through thin walls</li>\n<li class=\"\">Can extend your Home Assistant Bluetooth range via proxy</li>\n<li class=\"\">Good quality braided cable</li>\n<li class=\"\">Works with Home Assistant via WiFi</li>\n<li class=\"\">USB-C powered</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"cons\">Cons<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#cons\" class=\"hash-link\" aria-label=\"Direct link to Cons\" title=\"Direct link to Cons\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Not always in stock since they're a relative small startup business</li>\n<li class=\"\">Setting up different zones can be tricky, as it's a beta feature requiring trial and error defining coordinates in 3D space by using start and end X/Y millimetre values</li>\n<li class=\"\">It's capable of detecting small movements such as breathing, however I was able to sit still long enough for it to give me a false positive and detect me as away (though sensitivity can be calibrated, to fix this)</li>\n<li class=\"\">Only available in white</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"home-assistant-automations\">Home Assistant automations<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#home-assistant-automations\" class=\"hash-link\" aria-label=\"Direct link to Home Assistant automations\" title=\"Direct link to Home Assistant automations\" translate=\"no\">​</a></h2>\n<p>Note: you'll need to paste this in YAML mode then switch back to the visual editor you should then be able to update the device/light IDs.</p>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"on---lights-on-when-dark--presence-detected\">On - Lights on when dark &amp; presence detected<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#on---lights-on-when-dark--presence-detected\" class=\"hash-link\" aria-label=\"Direct link to On - Lights on when dark &amp; presence detected\" title=\"Direct link to On - Lights on when dark &amp; presence detected\" translate=\"no\">​</a></h3>\n<div class=\"language-yml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">alias</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> On </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> Lights on when dark &amp; presence detected</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">description</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">trigger</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">platform</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sun</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">event</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sunset</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">offset</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"-00:30:00\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> illuminance</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">platform</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> device</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sensor.epl_presence_illuminance</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sensor</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">for</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">hours</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">minutes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">seconds</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">20</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">below</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">2.7</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">platform</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> binary_sensor.epl_presence_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">to</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"on\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">platform</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> person.DigitallyRefined</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">from</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> not_home</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">to</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> home</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> time</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">before</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"21:55:00\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> device</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> is_off</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">device_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> &lt;pick your light</span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> light</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> or</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">conditions</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> is_illuminance</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> device</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sensor.epl_presence_illuminance</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sensor</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">below</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">2.7</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sun</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">after</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> sunset</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">after_offset</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"-00:30:00\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> numeric_state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> zone.home</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">above</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> binary_sensor.epl_presence_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">state</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"on\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Optional condition based on a Zigbee button press to prevent lights from automatically turning on again</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># (within 1 hour when they have been manually be turned off)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> template</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">value_template</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> ((as_timestamp(now()) </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      as_timestamp(states.scene.lights_off_manually_triggered.state)) </span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"> 3600) or</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      (as_timestamp(states.scene.lights_on.state) </span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      as_timestamp(states.scene.lights_off_manually_triggered.state)) </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">action</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">service</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> scene.turn_on</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">target</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> scene.lights_on</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">metadata</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">mode</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> single</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"off---lights-no-occupancy\">Off - Lights (no occupancy)<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#off---lights-no-occupancy\" class=\"hash-link\" aria-label=\"Direct link to Off - Lights (no occupancy)\" title=\"Direct link to Off - Lights (no occupancy)\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">alias</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Off </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> Lights (no occupancy)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">description</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">trigger</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">platform</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> binary_sensor.epl_presence_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">from</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"on\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">to</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"off\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> device</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> is_on</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">device_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> &lt;pick your light</span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> switch</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Optional condition to check if a Smart TV is not current being used</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> not</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">conditions</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> device</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> media_player</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> &lt;pick your Android TV or streaming device</span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> is_playing</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">action</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">service</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> script.slowly_turn_off_lights_no_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">mode</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> single</span><br></span></code></pre></div></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"home-assistant-scripts\">Home Assistant scripts<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#home-assistant-scripts\" class=\"hash-link\" aria-label=\"Direct link to Home Assistant scripts\" title=\"Direct link to Home Assistant scripts\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"off---slowly-turn-off-lights-no-occupancy\">Off - Slowly turn off lights (no occupancy)<a href=\"https://digitallyrefined.github.io/guides/Everything-Presence-Lite-sensor#off---slowly-turn-off-lights-no-occupancy\" class=\"hash-link\" aria-label=\"Direct link to Off - Slowly turn off lights (no occupancy)\" title=\"Direct link to Off - Slowly turn off lights (no occupancy)\" translate=\"no\">​</a></h3>\n<div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">alias</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> Off </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> Slowly turn off lights (no occupancy)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">sequence</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">if</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> binary_sensor.epl_presence_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">state</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"off\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">then</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> turn_off</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> &lt;choose first light</span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> light</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">delay</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">hours</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">minutes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">seconds</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">10</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token key atrule\" style=\"color:#00a4db\">milliseconds</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">if</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> binary_sensor.epl_presence_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:#00a4db\">state</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"off\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token key atrule\" style=\"color:#00a4db\">then</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> turn_off</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> &lt;choose second light</span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> light</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">delay</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token key atrule\" style=\"color:#00a4db\">hours</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token key atrule\" style=\"color:#00a4db\">minutes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token key atrule\" style=\"color:#00a4db\">seconds</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">10</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token key atrule\" style=\"color:#00a4db\">milliseconds</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">          </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">if</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">condition</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> state</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> binary_sensor.epl_presence_occupancy</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token key atrule\" style=\"color:#00a4db\">state</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"off\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token key atrule\" style=\"color:#00a4db\">then</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">              </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> </span><span class=\"token key atrule\" style=\"color:#00a4db\">type</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> turn_off</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token key atrule\" style=\"color:#00a4db\">entity_id</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> &lt;choose third light etc</span><span class=\"token punctuation\" style=\"color:#393A34\">...</span><span class=\"token punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token key atrule\" style=\"color:#00a4db\">domain</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> switch</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">mode</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> single</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">icon</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> mdi</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">lightbulb</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">multiple</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">off</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">outline</span><br></span></code></pre></div></div>",
            "url": "https://DigitallyRefined.github.io/guides/Everything-Presence-Lite-sensor",
            "title": "Everything Presence Lite sensor",
            "summary": "The Everything Presence Lite sensor was release in October 2023 for £28 or around $30 (plus postage) from Everything Smart Technology.",
            "date_modified": "2023-11-06T00:00:00.000Z",
            "tags": [
                "Reviews",
                "Home Assistant",
                "Smart Home",
                "Hardware",
                "ESP32",
                "Automations",
                "YouTube",
                "Video"
            ]
        },
        {
            "id": "https://DigitallyRefined.github.io/guides/Tailscale-Headscale-setup",
            "content_html": "<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"setting-up-your-own-self-hosted-remote-access\">Setting up your own self hosted remote access<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#setting-up-your-own-self-hosted-remote-access\" class=\"hash-link\" aria-label=\"Direct link to Setting up your own self hosted remote access\" title=\"Direct link to Setting up your own self hosted remote access\" translate=\"no\">​</a></h2>\n<p><a href=\"https://headscale.net/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Headscale</a> is an open source implementation of the <a href=\"https://tailscale.com/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Tailscale</a> coordination server.</p>\n<p>This guide will step through setting up your own self hosted private and secure remote access using Tailscale clients along with a self hosted Headscale Docker container.</p>\n<!-- -->\n<div class=\"theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>warning</div><div class=\"admonitionContent_BuS1\"><p>Mentions of this being a free service in the video below are now no longer correct:</p><ul>\n<li class=\"\">To launch a server, a credit card is now required  (a temporary charge between $1-$10 will be taken to verify it)</li>\n<li class=\"\">Fly.io no longer offer free <a href=\"https://fly.io/docs/about/pricing/#anycast-ip-addresses\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">dedicated IPv4 addresses</a>, these are now charged at $2/month for each IPv4 address.</li>\n<li class=\"\">Fly.io gives new accounts <a href=\"https://fly.io/docs/about/pricing/#new-customers-get-a-free-trial\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">$5 of free trial credit and Hobby plans cost $5 per month</a>.</li>\n</ul><p>So in theory as long as you don't exceed the $5 free trial credit, this setup should still be free. Make sure that you check <a href=\"https://fly.io/docs/about/pricing/#free-allowances\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">their current free allowances</a>, as they may have changed since this guide was last published.</p></div></div>\n<!-- -->\n<div class=\"tableOfContentsInline_prmo\"><ul class=\"table-of-contents\"><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#setting-up-your-own-self-hosted-remote-access\">Setting up your own self hosted remote access</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#video\">Video</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#installation\">Installation</a><ul><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#flyio-client\">Fly.io client</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#flyio-deployment\">Fly.io deployment</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#launching-the-flyio-app\">Launching the Fly.io app</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#setting-up-the-flyio-docker-wireguard-tunnel\">Setting up the Fly.io docker-wireguard-tunnel</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#install-docker-community-edition-via-the-convenience-script\">Install Docker community edition via the convenience script</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#configuring-headscale\">Configuring Headscale</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#joining-tailscale-clients-to-the-network-using-your-custom-control-server-url\">Joining Tailscale clients to the network using your custom control server URL</a></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#docker-compose-setup-to-run-tailscale-on-linux\">Docker compose setup to run Tailscale on Linux</a></li></ul></li><li><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#additional-resources\">Additional resources</a></li></ul></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"video\">Video<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#video\" class=\"hash-link\" aria-label=\"Direct link to Video\" title=\"Direct link to Video\" translate=\"no\">​</a></h2>\n<!-- -->\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=rGJ5RvB_aBg\" aria-label=\"Watch Tailscale &amp; Headscale - Setting up your own self hosted remote access on YouTube\">Watch &quot;<!-- -->Tailscale &amp; Headscale - Setting up your own self hosted remote access<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"Tailscale &amp; Headscale - Setting up your own self hosted remote access\" role=\"img\" aria-label=\"Tailscale &amp; Headscale - Setting up your own self hosted remote access - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/rGJ5RvB_aBg/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch Tailscale &amp; Headscale - Setting up your own self hosted remote access\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<a href=\"https://youtu.be/rGJ5RvB_aBg\">Watch on YouTube</a>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"installation\">Installation<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#installation\" class=\"hash-link\" aria-label=\"Direct link to Installation\" title=\"Direct link to Installation\" translate=\"no\">​</a></h2>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"flyio-client\">Fly.io client<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#flyio-client\" class=\"hash-link\" aria-label=\"Direct link to Fly.io client\" title=\"Direct link to Fly.io client\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">apt</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">install</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">curl</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">curl</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-L</span><span class=\"token plain\"> https://fly.io/install.sh </span><span class=\"token operator\" style=\"color:#393A34\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">sh</span><br></span></code></pre></div></div>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token builtin class-name\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'export FLYCTL_INSTALL=\"$HOME/.fly\"'</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">&gt;&gt;</span><span class=\"token plain\"> ~/.bashrc</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'export PATH=\"$FLYCTL_INSTALL/bin:$PATH\"'</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">&gt;&gt;</span><span class=\"token plain\"> ~/.bashrc</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">source</span><span class=\"token plain\"> ~/.bashrc</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"flyio-deployment\">Fly.io deployment<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#flyio-deployment\" class=\"hash-link\" aria-label=\"Direct link to Fly.io deployment\" title=\"Direct link to Fly.io deployment\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> fly-tunnel</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> fly-tunnel</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">nano</span><span class=\"token plain\"> fly.toml</span><br></span></code></pre></div></div>\n<p>Note: you can update <code>choose-a-subdomain-1234</code> and <code>my-user</code> to any value you'd like to use.</p>\n<div class=\"language-toml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-toml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"># fly.toml app configuration file</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">#</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"># See https://fly.io/docs/reference/configuration/ for information about how to use this file.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">#</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">app = \"choose-a-subdomain-1234\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[build]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  image = \"ghcr.io/digitallyrefined/docker-wireguard-tunnel:v3\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[env]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  DOMAIN = \"choose-a-subdomain-1234.fly.dev\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  PEERS = \"1\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  SERVICES = \"peer1:headscale:80:80,peer1:headscale:443:443\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[[mounts]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  source = \"wireguard_data\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  destination = \"/etc/wireguard\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[[services]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  protocol = \"udp\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  internal_port = 51820</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  [[services.ports]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    port = 51820</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[[services]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  protocol = \"tcp\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  internal_port = 80</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  [[services.ports]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    port = 80</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">[[services]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  protocol = \"tcp\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  internal_port = 443</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  [[services.ports]]</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    port = 443</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"launching-the-flyio-app\">Launching the Fly.io app<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#launching-the-flyio-app\" class=\"hash-link\" aria-label=\"Direct link to Launching the Fly.io app\" title=\"Direct link to Launching the Fly.io app\" translate=\"no\">​</a></h3>\n<p><a href=\"https://fly.io/app/sign-up\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Sign up for a Fly.io account</a></p>\n<div class=\"theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning\"><div class=\"admonitionHeading_Gvgb\"><span class=\"admonitionIcon_Rf37\"><svg viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>warning</div><div class=\"admonitionContent_BuS1\"><p>Make sure that you check <a href=\"https://fly.io/docs/about/pricing/#free-allowances\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Fly.io's current free allowances</a>, as they may have changed since this guide was last published.</p></div></div>\n<p>This setup uses 1 Fly.io app. As long as you don't have more than 3 Fly.io apps running you wont be exceeding <a href=\"https://fly.io/docs/about/pricing/#free-allowances\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Fly.io's free allowance</a> in terms of server usage, however dedicated IPv4 addresses are now a <a href=\"https://fly.io/docs/about/pricing/#anycast-ip-addresses\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">paid for feature</a>, so you will need to add a credit card to launch this app. You can use a temporary credit card from <a href=\"https://privacy.com/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">privacy.com</a> in the US or <a href=\"https://www.revolut.com/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Revolut</a> in some parts of Europe.</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">fly auth login</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">fly launch</span><br></span></code></pre></div></div>\n<p>Use the following options:</p>\n<div class=\"language-text codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Would you like to copy its configuration to the new app? Yes</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Choose an app name (leaving blank will default to 'choose-a-subdomain-1234') choose-a-subdomain-1234</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Choose a region for deployment: Denver, Colorado (US) (den) # Or a location closest to you</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Would you like to set up a Postgresql database now? No</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Would you like to set up an Upstash Redis database now? No</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Would you like to deploy now? Yes</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">? Would you like to allocate a dedicated ipv4 address now? Yes</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"setting-up-the-flyio-docker-wireguard-tunnel\">Setting up the Fly.io <a href=\"https://github.com/DigitallyRefined/docker-wireguard-tunnel\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">docker-wireguard-tunnel</a><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#setting-up-the-flyio-docker-wireguard-tunnel\" class=\"hash-link\" aria-label=\"Direct link to setting-up-the-flyio-docker-wireguard-tunnel\" title=\"Direct link to setting-up-the-flyio-docker-wireguard-tunnel\" translate=\"no\">​</a></h3>\n<p>Once the Fly.io tunnel has started, a <code>peer1.conf</code> file will be automatically generated in the <code>/etc/wireguard</code> directory, it can be viewed and then removed via:</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">fly </span><span class=\"token function\" style=\"color:#d73a49\">ssh</span><span class=\"token plain\"> console</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">cat</span><span class=\"token plain\"> /etc/wireguard/peer1.conf</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Copy the contents of peer1.conf</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">rm</span><span class=\"token plain\"> /etc/wireguard/peer1.conf</span><br></span></code></pre></div></div>\n<p>Now we'll create a new folder called <code>headscale/fly-wireguard</code> and copy <code>peer1.conf</code> to a new file called <code>wg0.conf</code>.</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-p</span><span class=\"token plain\"> ~/headscale/fly-wireguard</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">nano</span><span class=\"token plain\"> ~/headscale/fly-wireguard/wg0.conf</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"install-docker-community-edition-via-the-convenience-script\">Install Docker community edition via the convenience script<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#install-docker-community-edition-via-the-convenience-script\" class=\"hash-link\" aria-label=\"Direct link to Install Docker community edition via the convenience script\" title=\"Direct link to Install Docker community edition via the convenience script\" translate=\"no\">​</a></h3>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">curl</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-fsSL</span><span class=\"token plain\"> https://get.docker.com </span><span class=\"token operator\" style=\"color:#393A34\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">bash</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">usermod</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-aG</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token environment constant\" style=\"color:#36acaa\">$USER</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"configuring-headscale\">Configuring Headscale<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#configuring-headscale\" class=\"hash-link\" aria-label=\"Direct link to Configuring Headscale\" title=\"Direct link to Configuring Headscale\" translate=\"no\">​</a></h3>\n<p>Create a headscale folder, import the default configuration and tweak</p>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> ~/headscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> config</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">wget</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-O</span><span class=\"token plain\"> ./config/config.yaml https://raw.githubusercontent.com/juanfont/headscale/main/config-example.yaml</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">nano</span><span class=\"token plain\"> config/config.yaml</span><br></span></code></pre></div></div>\n<p>Settings to update in the <code>config/config.yaml</code> file:</p>\n<div class=\"language-text codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">server_url: https://choose-a-subdomain-1234.fly.dev:443</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">listen_addr: 0.0.0.0:443</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">acme_email: \"you@example.com\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">tls_letsencrypt_hostname: \"choose-a-subdomain-1234.fly.dev\"</span><br></span></code></pre></div></div>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">nano</span><span class=\"token plain\"> docker-compose.yml</span><br></span></code></pre></div></div>\n<div class=\"language-yml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">version</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"2\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">headscale</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> headscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> headscale/headscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">command</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"headscale serve\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./config</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/headscale/</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/var/lib/headscale/</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">fly-wireguard-peer</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> headscale</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">fly</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">wireguard</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">peer</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> ghcr.io/digitallyrefined/docker</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">wireguard</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">tunnel</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">v3</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Note that DOMAIN &amp; PEERS are not required for the peer</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># Services to expose format (comma-separated)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># SERVICES=peer-id:peer-container-name:peer-container-port:expose-port-as</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> SERVICES=peer1</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">headscale</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token datetime number\" style=\"color:#36acaa\">80:80</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\">peer1</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">headscale</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">443</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token number\" style=\"color:#36acaa\">443</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">cap_add</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> NET_ADMIN</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">links</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> headscale</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">headscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./fly</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">wireguard</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/etc/wireguard</span><br></span></code></pre></div></div>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose up </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-d</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose logs </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><br></span></code></pre></div></div>\n<p>After a few minutes you should now be able to access your new Headscale server by going to your subdomain <code>https://choose-a-subdomain-1234.fly.dev/swagger</code></p>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"create-a-new-user-for-your-headscale-server\">Create a new user for your Headscale server<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#create-a-new-user-for-your-headscale-server\" class=\"hash-link\" aria-label=\"Direct link to Create a new user for your Headscale server\" title=\"Direct link to Create a new user for your Headscale server\" translate=\"no\">​</a></h4>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale </span><span class=\"token function\" style=\"color:#d73a49\">users</span><span class=\"token plain\"> create my-user</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"joining-tailscale-clients-to-the-network-using-your-custom-control-server-url\">Joining Tailscale clients to the network using your custom control server URL<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#joining-tailscale-clients-to-the-network-using-your-custom-control-server-url\" class=\"hash-link\" aria-label=\"Direct link to Joining Tailscale clients to the network using your custom control server URL\" title=\"Direct link to Joining Tailscale clients to the network using your custom control server URL\" translate=\"no\">​</a></h3>\n<ul>\n<li class=\"\"><a href=\"https://github.com/juanfont/headscale/blob/main/docs/windows-client.md\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Windows</a></li>\n<li class=\"\"><a href=\"https://github.com/juanfont/headscale/issues/106#issuecomment-918843218\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">macOS</a> (and create a <a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#create-a-new-preauth-key\" class=\"\">preauth key</a>)</li>\n<li class=\"\"><a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#docker-compose-setup-to-run-tailscale-on-linux\" class=\"\">Linux</a></li>\n<li class=\"\"><a href=\"https://github.com/juanfont/headscale/blob/main/docs/android-client.md\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Android</a></li>\n<li class=\"\"><a href=\"https://github.com/juanfont/headscale/blob/main/docs/iOS-client.md\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">iOS</a></li>\n</ul>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"registering-a-new-device-and-allowing-it-to-join-your-network\">Registering a new device and allowing it to join your network<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#registering-a-new-device-and-allowing-it-to-join-your-network\" class=\"hash-link\" aria-label=\"Direct link to Registering a new device and allowing it to join your network\" title=\"Direct link to Registering a new device and allowing it to join your network\" translate=\"no\">​</a></h4>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale nodes register </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--user</span><span class=\"token plain\"> my-user </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--key</span><span class=\"token plain\"> nodekey:</span><span class=\"token punctuation\" style=\"color:#393A34\">..</span><span class=\"token plain\">.</span><br></span></code></pre></div></div>\n<h3 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"docker-compose-setup-to-run-tailscale-on-linux\">Docker compose setup to run Tailscale on Linux<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#docker-compose-setup-to-run-tailscale-on-linux\" class=\"hash-link\" aria-label=\"Direct link to Docker compose setup to run Tailscale on Linux\" title=\"Direct link to Docker compose setup to run Tailscale on Linux\" translate=\"no\">​</a></h3>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"create-a-new-preauth-key\">Create a new preauth key<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#create-a-new-preauth-key\" class=\"hash-link\" aria-label=\"Direct link to Create a new preauth key\" title=\"Direct link to Create a new preauth key\" translate=\"no\">​</a></h4>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--user</span><span class=\"token plain\"> my-user preauthkeys create </span><span class=\"token parameter variable\" style=\"color:#36acaa\">--expiration</span><span class=\"token plain\"> 1h</span><br></span></code></pre></div></div>\n<h4 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"docker-composeyml\">docker-compose.yml<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#docker-composeyml\" class=\"hash-link\" aria-label=\"Direct link to docker-compose.yml\" title=\"Direct link to docker-compose.yml\" translate=\"no\">​</a></h4>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">mkdir</span><span class=\"token plain\"> ~/tailscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token builtin class-name\">cd</span><span class=\"token plain\"> ~/tailscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">nano</span><span class=\"token plain\"> docker-compose.yml</span><br></span></code></pre></div></div>\n<p>Update the <code>--login-server</code> URL and <code>--advertise-routes</code> to match your network, then add the preauth key to the <code>TS_AUTHKEY</code> environment variable (this key only used once on first run to join the network).</p>\n<div class=\"language-yml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-yml codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token key atrule\" style=\"color:#00a4db\">services</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token key atrule\" style=\"color:#00a4db\">tailscale</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">container_name</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> tailscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">image</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> tailscale/tailscale</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">stable</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">hostname</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> headtailscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">volumes</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> ./data</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/var/lib/tailscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> /dev/net/tun</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">/dev/net/tun</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">network_mode</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"host\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">cap_add</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> NET_ADMIN</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> NET_RAW</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">environment</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> TS_STATE_DIR=/var/lib/tailscale</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> TS_EXTRA_ARGS=</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">login</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">server=https</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\">//choose</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">a</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">subdomain</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">1234.fly.dev </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">advertise</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">exit</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">node </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">advertise</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">routes=192.168.x.0/24 </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">accept</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">dns=true</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\"> TS_NO_LOGS_NO_SUPPORT=true</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># - TS_AUTHKEY=...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token key atrule\" style=\"color:#00a4db\">restart</span><span class=\"token punctuation\" style=\"color:#393A34\">:</span><span class=\"token plain\"> unless</span><span class=\"token punctuation\" style=\"color:#393A34\">-</span><span class=\"token plain\">stopped</span><br></span></code></pre></div></div>\n<div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_QJqH\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\" style=\"color:#393A34;background-color:#f6f8fa\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose up </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-d</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> compose logs </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-f</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale nodes list</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale routes list</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale routes </span><span class=\"token builtin class-name\">enable</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-r</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale routes </span><span class=\"token builtin class-name\">enable</span><span class=\"token plain\"> </span><span class=\"token parameter variable\" style=\"color:#36acaa\">-r</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">2</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\"># 3 etc</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:#d73a49\">docker</span><span class=\"token plain\"> </span><span class=\"token builtin class-name\">exec</span><span class=\"token plain\"> headscale headscale routes list</span><br></span></code></pre></div></div>\n<p>Now each of client should be able connect with each other and access local network resources if you have enabled <code>--advertise-routes=192.168.x.0/24</code> and also be able to use your home internet connect while you're away via Tailscale <code>-advertise-exit-node</code> argument.</p>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"additional-resources\">Additional resources<a href=\"https://digitallyrefined.github.io/guides/Tailscale-Headscale-setup#additional-resources\" class=\"hash-link\" aria-label=\"Direct link to Additional resources\" title=\"Direct link to Additional resources\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\"><a href=\"https://tailscale.com/blog/how-tailscale-works/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">How Tailscale works</a></li>\n<li class=\"\">\n<a href=\"https://youtu.be/wLrmmh1eI94?t=937\">Traefik HTTPS tutorial</a>\n</li>\n</ul>\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=wLrmmh1eI94\" aria-label=\"Watch Is this the BEST Reverse Proxy for Docker? // Traefik Tutorial on YouTube\">Watch &quot;<!-- -->Is this the BEST Reverse Proxy for Docker? // Traefik Tutorial<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"Is this the BEST Reverse Proxy for Docker? // Traefik Tutorial\" role=\"img\" aria-label=\"Is this the BEST Reverse Proxy for Docker? // Traefik Tutorial - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/wLrmmh1eI94/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch Is this the BEST Reverse Proxy for Docker? // Traefik Tutorial\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>",
            "url": "https://DigitallyRefined.github.io/guides/Tailscale-Headscale-setup",
            "title": "Tailscale & Headscale",
            "summary": "Setting up your own self hosted remote access",
            "date_modified": "2023-06-01T00:00:00.000Z",
            "tags": [
                "Tailscale",
                "VPN",
                "Tunnelling",
                "Self-hosting",
                "Docker",
                "YouTube",
                "Video"
            ]
        },
        {
            "id": "https://DigitallyRefined.github.io/guides/IKEA-VINDSTYRKA",
            "content_html": "<p>The IKEA VINDSTYRKA an relatively inexpensive air quality monitor $49/£35 that was released in April 2023.</p>\n<!-- -->\n<!-- -->\n<div class=\"tableOfContentsInline_prmo\"><ul class=\"table-of-contents\"><li><a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#video\">Video</a></li><li><a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#features\">Features</a></li><li><a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#pros\">Pros</a></li><li><a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#cons\">Cons</a></li><li><a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#home-assistant-integration\">Home Assistant integration</a></li></ul></div>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"video\">Video<a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#video\" class=\"hash-link\" aria-label=\"Direct link to Video\" title=\"Direct link to Video\" translate=\"no\">​</a></h2>\n<!-- -->\n<!-- --><noscript><a href=\"https://www.youtube.com/watch?v=EvjTHlPT9zM\" aria-label=\"Watch IKEA VINDSTYRKA Review &amp; Pairing to Home Assistant on YouTube\">Watch &quot;<!-- -->IKEA VINDSTYRKA Review &amp; Pairing to Home Assistant<!-- -->&quot; on YouTube</a></noscript><article class=\"yt-lite\" data-title=\"IKEA VINDSTYRKA Review &amp; Pairing to Home Assistant\" role=\"img\" aria-label=\"IKEA VINDSTYRKA Review &amp; Pairing to Home Assistant - YouTube video preview\" style=\"background-image:url(https://i.ytimg.com/vi_webp/EvjTHlPT9zM/maxresdefault.webp);--aspect-ratio:56.25%\"><button type=\"button\" class=\"lty-playbtn\" aria-label=\"Watch IKEA VINDSTYRKA Review &amp; Pairing to Home Assistant\" tabindex=\"0\"><span class=\"lty-visually-hidden\">Watch</span></button></article>\n<a href=\"https://youtu.be/EvjTHlPT9zM\">Watch on YouTube</a>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"features\">Features<a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#features\" class=\"hash-link\" aria-label=\"Direct link to Features\" title=\"Direct link to Features\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">PM2.5</li>\n<li class=\"\">tVOC</li>\n<li class=\"\">Temperature</li>\n<li class=\"\">Humidity</li>\n<li class=\"\">Air quality icons</li>\n<li class=\"\">Zigbee radio</li>\n<li class=\"\">USB-C</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"pros\">Pros<a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#pros\" class=\"hash-link\" aria-label=\"Direct link to Pros\" title=\"Direct link to Pros\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">Relatively inexpensive way to add air quality, temperature &amp; humidity data to your smart home</li>\n<li class=\"\">Can perform automatons based on data, such as turning on/off air purifiers, air conditioning and dehumidifiers or even humidifiers</li>\n<li class=\"\">Configurable backlight brightness &amp; always on or auto off</li>\n<li class=\"\">Works with Home Assistant via Zigbee</li>\n<li class=\"\">USB-C powered</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"cons\">Cons<a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#cons\" class=\"hash-link\" aria-label=\"Direct link to Cons\" title=\"Direct link to Cons\" translate=\"no\">​</a></h2>\n<ul>\n<li class=\"\">No time or date on display (LCD limitation)</li>\n<li class=\"\">Fan does make small amount of noise</li>\n<li class=\"\">Temperature lacks decimal places (precision)</li>\n<li class=\"\">Getting the tVOC value via ZHA requires a bit more setup</li>\n<li class=\"\">Only available in white</li>\n<li class=\"\">No battery</li>\n</ul>\n<h2 class=\"anchor anchorTargetStickyNavbar_Vzrq\" id=\"home-assistant-integration\">Home Assistant integration<a href=\"https://digitallyrefined.github.io/guides/IKEA-VINDSTYRKA#home-assistant-integration\" class=\"hash-link\" aria-label=\"Direct link to Home Assistant integration\" title=\"Direct link to Home Assistant integration\" translate=\"no\">​</a></h2>\n<p>It's compatible both with the built-in Home Assistant <a href=\"https://www.home-assistant.io/integrations/zha/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">ZHA integration</a> and the <a href=\"https://github.com/zigbee2mqtt/hassio-zigbee2mqtt#installation\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">Zigbee2MQTT plug-in</a>.</p>\n<p>The video and this article previously mentioned that the tVOC sensor was not available via ZHA, but it was <a href=\"https://github.com/zigpy/zha-device-handlers/pull/3801\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">added in a later release</a>.</p>\n<p>See also: <a href=\"https://youtu.be/RWzzNe5gm5s\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"\">differences between ZHA and Zigbee2MQTT</a>.</p>",
            "url": "https://DigitallyRefined.github.io/guides/IKEA-VINDSTYRKA",
            "title": "IKEA VINDSTYRKA",
            "summary": "The IKEA VINDSTYRKA an relatively inexpensive air quality monitor $49/£35 that was released in April 2023.",
            "date_modified": "2023-05-14T00:00:00.000Z",
            "tags": [
                "Reviews",
                "Home Assistant",
                "Smart Home",
                "Hardware",
                "YouTube",
                "Video"
            ]
        }
    ]
}